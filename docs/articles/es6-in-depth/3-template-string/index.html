<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Alan's Blog Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Alan's Blog Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WSJXZXE31N"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-WSJXZXE31N",{anonymize_ip:!0})</script>
<script src="scripts/baidu.js"></script><title data-react-helmet="true">深入浅出 ES6（四）：模板字符串  -  Alan&#x27;s Blog</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="深入浅出 ES6（四）：模板字符串  -  Alan&#x27;s Blog"><meta data-react-helmet="true" name="description" content="深入浅出 ES6"><meta data-react-helmet="true" property="og:description" content="深入浅出 ES6"><meta data-react-helmet="true" name="keywords" content="es6,javascript,深入浅出ES6,ES6 in depth"><meta data-react-helmet="true" property="og:url" content="https://blog.alanwei.com/docs/articles/es6-in-depth/3-template-string"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://blog.alanwei.com/docs/articles/es6-in-depth/3-template-string"><link rel="stylesheet" href="/styles.db0a97ff.css">
<link rel="preload" href="/styles.d3a120c2.js" as="script">
<link rel="preload" href="/runtime~main.02f784f8.js" as="script">
<link rel="preload" href="/main.dbc12ee1.js" as="script">
<link rel="preload" href="/1.68d34cb6.js" as="script">
<link rel="preload" href="/2.d3174b6b.js" as="script">
<link rel="preload" href="/3.a4b3d095.js" as="script">
<link rel="preload" href="/1be78505.175b8a94.js" as="script">
<link rel="preload" href="/340.745d8f04.js" as="script">
<link rel="preload" href="/935f2afb.a1860131.js" as="script">
<link rel="preload" href="/17896441.fee64f9f.js" as="script">
<link rel="preload" href="/9d87e788.d1eca15a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top navbarHideable_17Wu navbarHidden_19ww"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Alan&#x27;s Blog</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">文档</a><a class="navbar__item navbar__link" href="/blog">博客</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/alanwei43" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Alan&#x27;s Blog</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">文档</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">博客</a></li><li class="menu__list-item"><a href="https://github.com/alanwei43" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy sidebarWithHideableNavbar_CROi"><a tabindex="-1" class="sidebarLogo_xFc8" href="/"><img src="/img/logo.png" alt="logo" class="themedImage_YANc themedImage--light_3CMI"><img src="/img/logo.png" alt="logo" class="themedImage_YANc themedImage--dark_3ARp"><strong>Alan&#x27;s Blog</strong></a><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">我的文档列表</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">系列文章</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/">README.md</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">深入浅出ES6</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/0-introduction">ES6是什么</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/1-iterators-and-the-for-of-loop">迭代器和 for-of 循环</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/2-generators">生成器 Generators</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/articles/es6-in-depth/3-template-string">模板字符串</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/4-rest-parameters-and-defaults">不定参数和默认参数</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/5-destructuring">解构 Destructuring</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/6-arrow-functions">箭头函数 Arrow Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/7-symbols">Symbols</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/8-babel-and-broccoli">学习 Babel 和 Broccoli，马上就用 ES6</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/9-collections">集合</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/10-generators-continued">生成器 Generators，续篇</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/11-proxies-and-reflect">代理 Proxies</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/12-classes">类 Class</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/13-let-and-const">let 和 const</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/14-subclassing">子类 Subclassing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/15-modules">模块 Modules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/16-the-future">展望未来</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Why Java Sucks and C# Rocks</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/why-java-sucks-and-csharp-rocks/1-compare-purpose">比较的意义与目的</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/why-java-sucks-and-csharp-rocks/2-basic-type-and-oop">基础类型与面向对象</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/why-java-sucks-and-csharp-rocks/3-attribute-and-annotation">Attribute与Annotation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/why-java-sucks-and-csharp-rocks/4-1-reddit-and-property">Reddit，兼谈C#属性</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/why-java-sucks-and-csharp-rocks/4-generics">泛型</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/why-java-sucks-and-csharp-rocks/5-1-standard-event-model">标准事件模型</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/why-java-sucks-and-csharp-rocks/5-anonymous-method">匿名方法</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/why-java-sucks-and-csharp-rocks/6-yield">yield及其作用</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">RabbitMQ Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/rabbitmq-guide/0-install">安装</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/rabbitmq-guide/1-hello-world">Hello World</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/rabbitmq-guide/2-WorkQueues">Work Queues</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/rabbitmq-guide/3-Publish-Subscribe">Publish/Subscribe</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/rabbitmq-guide/4-Routing">Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/rabbitmq-guide/5-Topic">Topics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/rabbitmq-guide/6-RPC">Remote procedure call (RPC)</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">OkHttp Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/okhttp-guide/1-overview">概述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/okhttp-guide/2-calls">调用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/okhttp-guide/3-caching">缓存</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/okhttp-guide/4-connections">连接</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/okhttp-guide/5-events">事件</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/okhttp-guide/6-https">HTTPS</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">博文分类</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/archives/">README.md</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/archives/program">编程语言</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/archives/literature">文章转摘</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/archives/server">系统服务</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/archives/docker">Docker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/archives/editor">编辑器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/archives/mirrors">镜像列表</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/archives/git-guides">Git</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/archives/bookmarks">书签</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">阅读笔记</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading/">README.md</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading/practical-vim">Vim实用技巧</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Mastering Spring 5.0</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading/mastering-spring-5/">README</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading/mastering-spring-5/chapter-1">向 Spring Framework 5.0 进化</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading/mastering-spring-5/chapter-2">依赖注入</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading/mastering-spring-5/chapter-3">使用Spring MVC构建Web应用程序</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading/zh.javascript.info">现代 JavaScript 教程</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading/understanding-ecmascript-6">Understanding ECMAScript 6</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Docusaurus 文档翻译</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/intro">简介</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/blog">博客</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/docs/markdown-features">Markdown 特性</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/typescript-support">TypeScript支持</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/api/client">Client API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/theme">主题</a></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_2WRA"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_CoMu"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">深入浅出 ES6（四）：模板字符串</h1></header><div class="markdown"><section><ul style="margin-left:-1em"><li>作者: <a href="https://www.infoq.cn/" target="_blank">InfoQ.cn</a></li><li>来源: <a href="https://www.infoq.cn/" target="_blank">https://www.infoq.cn/</a></li><li>本文仅用于本人学习和存档, 文章所有权归作者 <a href="https://www.infoq.cn/" target="_blank">InfoQ.cn</a> 所有, 如有侵权请发送邮件至 <a href="mailto:alan.wei@live.com;hello@alanwei.com?subject=删除侵权文章" target="_top">alan.wei#live.com(<i>#换成@</i>)</a> 删除此文.</li></ul></section><p><a href="https://www.infoq.cn/article/es6-in-depth-template-string" target="_blank" rel="noopener noreferrer">原文</a></p><p>在上一篇文章中，我说过要写一篇风格迥异的新文章，在了解了迭代器和生成器后，是时候来品味一些不烧脑的简单知识，如果你们觉得太难了，还不快去啃犀牛书！</p><p>现在，就让我们从最简单的知识学起吧！</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="反撇号（）基础知识"></a>反撇号（`）基础知识<a class="hash-link" href="#反撇号（）基础知识" title="Direct link to heading">#</a></h2><p>ES6 引入了一种新型的字符串字面量语法，我们称之为模板字符串（template strings）。除了使用反撇号字符 ` 代替普通字符串的引号 ’ 或 &quot; 外，它们看起来与普通字符串并无二致。在最简单的情况下，它们与普通字符串的表现一致：</p><p><code>context.fillText(Ceci n’est pas une chaîne., x, y);</code>但是我们并没有说：“原来只是被反撇号括起来的普通字符串啊”。模板字符串名之有理，它为 JavaScript 提供了简单的字符串插值功能，从此以后，你可以通过一种更加美观、更加方便的方式向字符串中插值了。</p><p>模板字符串的使用方式成千上万，但是最让我会心一暖的是将其应用于毫不起眼的错误消息提示：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">authorize</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">user</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">!</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">hasPrivilege</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">action</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">用户 </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">user</span><span class="token template-string interpolation punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string string" style="color:rgb(255, 121, 198)"> 未被授权执行 </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">action</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string string" style="color:rgb(255, 121, 198)"> 操作。</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>在这个示例中，<code>${user.name}</code>和 <code>${action}</code>被称为模板占位符，JavaScript 将把 <code>user.name</code> 和 <code>action</code> 的值插入到最终生成的字符串中，例如：<code>用户 jorendorff 未被授权打冰球。</code>（这是真的，我还没有获得冰球许可证。）</p><p>到目前为止，我们所了解到的仅仅是比 <code>+</code> 运算符更优雅的语法，下面是你可能期待的一些特性细节：</p><ul><li>模板占位符中的代码可以是任意 JavaScript 表达式，所以函数调用、算数运算等这些都可以作为占位符使用，你甚至可以在一个模板字符串中嵌套另一个，我称之为模板套构（template inception）。</li><li>如果这两个值都不是字符串，可以按照常规将其转换为字符串。例如：如果 <code>action</code> 是一个对象，将会调用它的<code>.toString()</code> 方法将其转换为字符串值。</li><li>如果你需要在模板字符串中书写反撇号，你必须使用反斜杠将其转义：<strong>\`</strong> 等价于 <strong>`</strong>。</li><li>同样地，如果你需要在模板字符串中引入字符 <code>$</code> 和<code>{</code>。无论你要实现什么样的目标，你都需要用反斜杠转义每一个字符：<code>\$</code>和<code>\{</code>。</li></ul><p>与普通字符串不同的是，模板字符串可以多行书写：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">$</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;#warning&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">html</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token template-string string" style="color:rgb(255, 121, 198)">  &lt;h1&gt; 小心！&gt;/h1&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token template-string string" style="color:rgb(255, 121, 198)">  &lt;p&gt; 未经授权打冰球可能受罚</span></div><div class="token-line" style="color:#F8F8F2"><span class="token template-string string" style="color:rgb(255, 121, 198)">  将近 </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">maxPenalty</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string string" style="color:rgb(255, 121, 198)">分钟。&lt;/p&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token template-string string" style="color:rgb(255, 121, 198)"></span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>模板字符串中所有的空格、新行、缩进，都会原样输出在生成的字符串中。</p><p>好啦，我说过要让你们轻松掌握模板字符串，从现在起难度会加大，你可以到此为止，去喝一杯咖啡，慢慢消化之前的知识。真的，及时回头不是一件令人感到羞愧的事情。 Lopes Gonçalves 曾经向我们证明过，船只不会被海妖碾压，也不会从地球的边缘坠落下去，他最终跨越了赤道，但是他有继续探索整个南半球么？并没有，他回家了，吃了一顿丰盛的午餐，你一定不排斥这样的感觉。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="反撇号的未来"></a>反撇号的未来<a class="hash-link" href="#反撇号的未来" title="Direct link to heading">#</a></h2><p>当然，模板字符串也并非事事包揽：</p><ul><li>它们不会为你自动转义特殊字符，为了避免跨站脚本漏洞，你应当像拼接普通字符串时做的那样对非置信数据进行特殊处理。</li><li>它们无法很好地与国际化库（可以帮助你面向不同用户提供不同的语言）相配合，模板字符串不会格式化特定语言的数字和日期，更别提同时使用不同语言的情况了。</li><li>它们不能替代模板引擎的地位，例如： Mustache 、 Nunjucks 。</li></ul><p>模板字符串没有内建循环语法，所以你无法通过遍历数组来构建类似 HTML 中的表格，甚至它连条件语句都不支持。你当然可以使用模板套构（template inception）的方法实现，但在我看来这方法略显愚钝啊。</p><p>不过，ES6 为 JS 开发者和库设计者提供了一个很好的衍生工具，你可以借助这一特性突破模板字符串的诸多限制，我们称之为标签模板（tagged templates）。</p><p>标签模板的语法非常简单，在模板字符串开始的反撇号前附加一个额外的标签即可。我们的第一个示例将添加一个 SaferHTML 标签，我们要用这个标签来解决上述的第一个限制：自动转义特殊字符。</p><p>请注意，ES6 标准库不提供类似 SaferHTML 功能，我们将在下面自己来实现这个功能。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> message </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">SaferHTML</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">&lt;p&gt;</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">bonk</span><span class="token template-string interpolation punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token template-string interpolation">sender</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string string" style="color:rgb(255, 121, 198)"> 向你示好。&lt;/p&gt;</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>这里用到的标签是一个标识符 <code>SaferHTML</code>；也可以使用属性值作为标签，例如：<code>SaferHTML.escape</code>；还可以是一个方法调用，例如：<code>SaferHTML.escape({unicodeControlCharacters: false})</code>。精确地说，任何 ES6 的成员表达式（MemberExpression）或调用表达式（CallExpression）都可作为标签使用。</p><p>可以看出，无标签模板字符串简化了简单字符串拼接，标签模板则完全简化了函数调用！</p><p>上面的代码等效于：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> message </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(80, 250, 123)">SaferHTML</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">templateData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> bonk</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">sender</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><code>templateData</code> 是一个不可变数组，存储着模板所有的字符串部分，由 JS 引擎为我们创建。因为占位符将标签模板分割为两个字符串的部分，所以这个数组内含两个元素，形如 <code>Object.freeze ([&quot; &quot;, &quot; has sent you a bonk.])</code></p><p>（事实上，<code>templateData</code> 中还有一个属性，在这篇文章中我们不会用到，但是它是标签模板不可分割的一环： <code>templateData.raw</code>，它同样是一个数组，存储着标签模板中所有的字符串部分，如果我们查看源码将会发现，在这里是使用形如 <code>\n</code> 的转义序列分行，而在 <code>templateData</code> 中则为真正的新行，标准标签 <code>String.raw</code> 会用到这些原生字符串。）</p><p>如此一来， <code>SaferHTML</code> 函数就可以有成千上万种方法来解析字符串和占位符。</p><p>在继续阅读以前，可能你苦苦思索到底用 <code>SaferHTML</code> 来做什么，然后着手尝试去实现它，归根结底，它只是一个函数，你可以在 Firefox 的开发者控制台里测试你的成果。</p><p>以下是一种可行的方案（在 <a href="https://gist.github.com/jorendorff/1a17f69dbfaafa2304f0" target="_blank" rel="noopener noreferrer">gist</a> 中查看）：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(80, 250, 123)">SaferHTML</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">templateData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> s </span><span class="token operator">=</span><span class="token plain"> templateData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> arguments</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> arg </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">String</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 转义占位符中的特殊字符。</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    s </span><span class="token operator">+=</span><span class="token plain"> arg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">replace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">&amp;</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-flags">g</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&amp;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">replace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">&lt;</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-flags">g</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&lt;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">replace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">&lt;</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-flags">g</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&gt;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// 不转义模板中的特殊字符。</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    s </span><span class="token operator">+=</span><span class="token plain"> templateData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>通过这样的定义，标签模板 <code>SaferHTML&lt;p&gt;${bonk.sender} 向你示好。&lt;/p&gt;</code> 可能扩展为字符串 <code>ES6&lt;3er 向你示好。</code>。</p><p>（顺便一提，如果你感觉上述代码中在函数内部使用<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments" target="_blank" rel="noopener noreferrer">参数对象</a>的方式令你感到枯燥乏味，不妨期待下一篇大作，ES6 中的另一个新特性一定会让你眼前一亮！）</p><p>仅一个简单的示例不足以说明标签模板的灵活性，我们一起回顾下我们之前有关模板字符串限制的列表，看一下你还能做些什么不一样的事情。</p><ul><li>模板字符串不会自动转义特殊字符。但是正如我们看到的那样，通过标签模板，你可以自己写一个标签函数来解决这个问题。</li></ul><p>事实上，你可以做的比那更好。</p><p>站在安全角度来说，我实现的 SaferHTML 函数相当脆弱，你需要通过多种不同的方式将 HTML 不同部分的特殊字符转义，SaferHTML 就无法做到全部转义。但是稍加努力，你就可以写出一个更加智能的 SaferHTML 函数，它可以针对 templateData 中字符串中的 HTML 位进行解析，分析出哪一个占位符是纯 HTML；哪一个是元素内部属性，需要转义’和&quot;；哪一个是 URL 的 query 字符串，需要进行 URL 转义而非 HTML 转义，等等。智能 SaferHTML 函数可以将每个占位符都正确转义。</p><p>HTML 的解析速度很慢，这种方法听起来是否略显牵强？幸运的是，当模板重新求值的时候标签模板的字符串部分是不改变的。SaferHTML 可以缓存所有的解析结果，来加速后续的调用。（缓存可以按照 ES6 的另一个特性——WeakMap 的形式进行存储，我们将在未来的文章中继续深入讨论。）</p><ul><li>模板字符串没有内建的国际化特性，但是通过标签，我们可以添加这些功能。Jack Hsu 的一篇博客文章展示了具体的实现过程。我谨在此处抛砖引玉：</li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">i18n</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">Hello </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string string" style="color:rgb(255, 121, 198)">, you have </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">amount</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string string" style="color:rgb(255, 121, 198)">:c(CAD) in your bank account.</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// =&gt; Hallo Bob, Sie haben 1.234,56 $CA auf Ihrem Bankkonto.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>注意观察这个示例中的运行细节，name 和 amount 都是 JavaScript，进行正常插值处理，但是有一段与众不同的代码，:c(CAD)，Jack 将它放入了模板的字符串部分。JavaScript 理应由 JavaScript 引擎进行处理，字符串部分由 Jack 的 i18n 标签进行处理。使用者可以通过 i18n 的文档了解到，<code>:c(CAD)</code> 代表加拿大元的货币单位。</p><p>这就是标签模板的大部分实际应用了。</p><ul><li>模板字符串不能代替 Mustache 和 Nunjucks，一部分原因是在模板字符串没有内建的循环或条件语句语法。我们一起来看如何解决这个问题，如果 JS 不提供这个特性，我们就写一个标签来提供相应支持。
</li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// 基于纯粹虚构的模板语言</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// ES6 标签模板。</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> libraryHtml </span><span class="token operator">=</span><span class="token plain"> hashTemplate</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token template-string string" style="color:rgb(255, 121, 198)">  &lt;ul&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token template-string string" style="color:rgb(255, 121, 198)">    #for book in </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token template-string interpolation">myBooks</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token template-string string" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token template-string string" style="color:rgb(255, 121, 198)">      &lt;li&gt;&lt;i&gt;#{book.title}&lt;/i&gt; by #{book.author}&lt;/li&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token template-string string" style="color:rgb(255, 121, 198)">    #end</span></div><div class="token-line" style="color:#F8F8F2"><span class="token template-string string" style="color:rgb(255, 121, 198)">  &lt;/ul&gt;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token template-string string" style="color:rgb(255, 121, 198)"></span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>标签模板带来的灵活性远不止于此，要记住，标签函数的参数不会自动转换为字符串，它们如返回值一样，可以是任何值，标签模板甚至不一定要是字符串！你可以用自定义的标签来创建正则表达式、DOM 树、图片、以 promises 为代表的整个异步过程、JS 数据结构、GL 着色器……</p><p>标签模板以开放的姿态欢迎库设计者们来创建强有力的领域特定语言。这些语言可能看起来不像 JS，但是它们仍可以无缝嵌入到 JS 中并与 JS 的其它语言特性智能交互。我不知道这一特性将会带领我们走向何方，但它蕴藏着无限的可能性，这令我感到异常兴奋！
我什么时候可以开始使用这一特性？</p><p>在服务器端，io.js 支持 ES6 的模板字符串。</p><p>在浏览器端，Firefox 34+ 支持模板字符串。它们由去年夏天的实习生项目组里的 Guptha Rajagopal 实现。模板字符串同样在 Chrome 41+ 中得以支持，但是 IE 和 Safari 都不支持。到目前为止，如果你想要在 web 端使用模板字符串的功能，你将需要 Babel 或 Traceur 协助你完成 ES6 到 ES5 的代码转译，你也可以在 TypeScript 中立即使用这一特性。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="等等那么-markdown-呢？"></a>等等——那么 Markdown 呢？<a class="hash-link" href="#等等那么-markdown-呢？" title="Direct link to heading">#</a></h2><p>嗯？</p><p>哦…这是个好问题。</p><p>（这一章节与 JavaScript 无关，如果你不使用 <a href="http://daringfireball.net/projects/markdown/basics" target="_blank" rel="noopener noreferrer">Markdown</a> ，可以跳过这一章。）</p><p>对于模板字符串而言，Markdown 和 JavaScript 现在都使用`字符来表示一些特殊的事物。事实上，在 Markdown 中，反撇号用来分割在内联文本中间的代码片段。</p><p>这会带来许多问题！如果你在 Markdown 中写这样的文档：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">To display a message, write `alert(`hello world!`)`.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>它将这样显示：</p><blockquote><p>To display a message, write <code>alert(</code>hello world!<code>)</code>.</p></blockquote><p>请注意，输出文本中的反撇号消失了。Markdown 将所有的四个反撇号解释为代码分隔符并用 HTML 标签将其替换掉。</p><p>为了避免这样的情况发生，我们要借助 Markdown 中的一个鲜为人知的特性，你可以使用多行反撇号作为代码分隔符，就像这样：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">To display a message, write ``alert(`hello world!`)``.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>在这个 <a href="https://gist.github.com/jorendorff/d3df45120ef8e4a342e5" target="_blank" rel="noopener noreferrer">Gist</a> 有具体代码细节，它由 Markdown 写成，所以你可以直接查看源代码。
下回预告</p><p>下一次，我们将要接触两个新特性，数十年以来它们深得其它语言程序员的喜爱：其中一个可以使开发者免于传参（使用默认参数），另一个可以帮助传非常多参数的开发者们管理他们的函数参数。这两个特性对我们所有人来说都非常有帮助！</p><p>客座作者 Benjamin Peterson 在 Firefox 中实现了这些特性，我们将透过他的视角来了解这些新特性，它将为我们深入解析 ES6 默认参数及不定参数。观众老爷们记得回来哦！我会想你们的！</p><div>感谢<a href="http://www.infoq.com/cn/author/%E5%88%98%E6%8C%AF%E6%B6%9B">刘振涛</a>对本文的策划， <a href="http://www.infoq.com/cn/author/%E5%BE%90%E5%B7%9D">徐川</a>对本文的审校。</div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/alanwei43/blog/tree/master/src/docs/articles/es6-in-depth/3-template-string.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/articles/es6-in-depth/2-generators"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 深入浅出 ES6（三）：生成器 Generators</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/articles/es6-in-depth/4-rest-parameters-and-defaults"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">深入浅出 ES6（五）：不定参数和默认参数 »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#反撇号（）基础知识" class="table-of-contents__link">反撇号（`）基础知识</a></li><li><a href="#反撇号的未来" class="table-of-contents__link">反撇号的未来</a></li><li><a href="#等等那么-markdown-呢？" class="table-of-contents__link">等等——那么 Markdown 呢？</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">文章列表</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/articles/es6-in-depth/0-introduction">深入浅出ES6 - InfoQ.cn</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/articles/why-java-sucks-and-csharp-rocks/1-compare-purpose">Why Java Sucks and C# Rocks - 赵劼</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/reading">阅读笔记</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/archives/git-guides">博文归档</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">文档翻译</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/guides/blog">Docusaurus Blog</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/guides/docs/markdown-features">Docusaurus Markdown</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">更多</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/alanwei43/node-auto-update" target="_blank" rel="noopener noreferrer" class="footer__link-item">node-auto-update - GitHub</a></li><li class="footer__item"><a href="https://github.com/alanwei43/docker-puppeteer" target="_blank" rel="noopener noreferrer" class="footer__link-item">docker-puppeteer - GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Alan's Blog</div></div></div></footer><div class="youPai_2rSg"><a href="https://www.upyun.com/?utm_source=lianmeng&amp;utm_medium=referral" target="_blank">本网站由<img src="https://gitee.com/alanway/resources/raw/master/images/youpai-logo.png">提供CDN加速/云存储服务</a></div></div></div>
<script src="/styles.d3a120c2.js"></script>
<script src="/runtime~main.02f784f8.js"></script>
<script src="/main.dbc12ee1.js"></script>
<script src="/1.68d34cb6.js"></script>
<script src="/2.d3174b6b.js"></script>
<script src="/3.a4b3d095.js"></script>
<script src="/1be78505.175b8a94.js"></script>
<script src="/340.745d8f04.js"></script>
<script src="/935f2afb.a1860131.js"></script>
<script src="/17896441.fee64f9f.js"></script>
<script src="/9d87e788.d1eca15a.js"></script>
</body>
</html>