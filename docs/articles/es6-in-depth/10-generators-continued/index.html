<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Alan's Blog Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Alan's Blog Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WSJXZXE31N"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-WSJXZXE31N",{anonymize_ip:!0})</script>
<script src="/resources/scripts/baidu.js"></script><title data-react-helmet="true">深入浅出 ES6（十一）：生成器 Generators，续篇  -  Alan&#x27;s Blog</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="深入浅出 ES6（十一）：生成器 Generators，续篇  -  Alan&#x27;s Blog"><meta data-react-helmet="true" name="description" content="深入浅出 ES6"><meta data-react-helmet="true" property="og:description" content="深入浅出 ES6"><meta data-react-helmet="true" name="keywords" content="es6,javascript,深入浅出ES6,ES6 in depth"><meta data-react-helmet="true" property="og:url" content="https://blog.alanwei.com/docs/articles/es6-in-depth/10-generators-continued"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://blog.alanwei.com/docs/articles/es6-in-depth/10-generators-continued"><link rel="stylesheet" href="/styles.0f34ef1b.css">
<link rel="preload" href="/styles.ef979260.js" as="script">
<link rel="preload" href="/runtime~main.b3aa57c2.js" as="script">
<link rel="preload" href="/main.97dbbfc1.js" as="script">
<link rel="preload" href="/1.d90096e2.js" as="script">
<link rel="preload" href="/2.c8f058bf.js" as="script">
<link rel="preload" href="/3.53cf90bc.js" as="script">
<link rel="preload" href="/1be78505.1f337c7f.js" as="script">
<link rel="preload" href="/262.877daa33.js" as="script">
<link rel="preload" href="/935f2afb.d2a7b4e4.js" as="script">
<link rel="preload" href="/17896441.0276eaa7.js" as="script">
<link rel="preload" href="/c6ad4fa6.3a81abaf.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top navbarHideable_17Wu navbarHidden_19ww"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Alan&#x27;s Blog</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">文档</a><a class="navbar__item navbar__link" href="/blog">博客</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/alanwei43" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Alan&#x27;s Blog</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">文档</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">博客</a></li><li class="menu__list-item"><a href="https://github.com/alanwei43" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy sidebarWithHideableNavbar_CROi"><a tabindex="-1" class="sidebarLogo_xFc8" href="/"><img src="/img/logo.png" alt="logo" class="themedImage_YANc themedImage--light_3CMI"><img src="/img/logo.png" alt="logo" class="themedImage_YANc themedImage--dark_3ARp"><strong>Alan&#x27;s Blog</strong></a><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">我的文档列表</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">系列文章</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles">README.md</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">深入浅出ES6</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/0-introduction">ES6是什么</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/1-iterators-and-the-for-of-loop">迭代器和 for-of 循环</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/2-generators">生成器 Generators</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/3-template-string">模板字符串</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/4-rest-parameters-and-defaults">不定参数和默认参数</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/5-destructuring">解构 Destructuring</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/6-arrow-functions">箭头函数 Arrow Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/7-symbols">Symbols</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/8-babel-and-broccoli">学习 Babel 和 Broccoli，马上就用 ES6</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/9-collections">集合</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/articles/es6-in-depth/10-generators-continued">生成器 Generators，续篇</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/11-proxies-and-reflect">代理 Proxies</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/12-classes">类 Class</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/13-let-and-const">let 和 const</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/14-subclassing">子类 Subclassing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/15-modules">模块 Modules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/articles/es6-in-depth/16-the-future">展望未来</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Why Java Sucks and C# Rocks</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/why-java-sucks-and-csharp-rocks/1-compare-purpose">比较的意义与目的</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/why-java-sucks-and-csharp-rocks/2-basic-type-and-oop">基础类型与面向对象</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/why-java-sucks-and-csharp-rocks/3-attribute-and-annotation">Attribute与Annotation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/why-java-sucks-and-csharp-rocks/4-1-reddit-and-property">Reddit，兼谈C#属性</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/why-java-sucks-and-csharp-rocks/4-generics">泛型</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/why-java-sucks-and-csharp-rocks/5-1-standard-event-model">标准事件模型</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/why-java-sucks-and-csharp-rocks/5-anonymous-method">匿名方法</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/why-java-sucks-and-csharp-rocks/6-yield">yield及其作用</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">RabbitMQ 官方教程</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/rabbitmq-guides/0-install">安装</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/rabbitmq-guides/1-hello-world">Hello World</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/rabbitmq-guides/2-WorkQueues">Work Queues</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/rabbitmq-guides/3-Publish-Subscribe">Publish/Subscribe</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/rabbitmq-guides/4-Routing">Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/rabbitmq-guides/5-Topic">Topics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/articles/rabbitmq-guides/6-RPC">Remote procedure call (RPC)</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">阅读笔记</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading">README.md</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading/bulletproff-ssl-and-tls-understanding-and-deploying-ssl-tls-and-pki-to-secure-servers-and-web-applications">HTTPS 权威指南 在服务器和Web应用上部署SSL/TLS和PKI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading/core-java-for-the-impatient">Core Java for the Impatient</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading/mastering-spring-5">Mastering Spring 5.0</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading/practical-vim">Vim实用技巧</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading/spring-in-action">Spring in Action</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading/understanding-ecmascript-6">Understanding ECMAScript 6</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading/using-docker">Docker开发指南</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading/you-dont-know-js-2">你不知道的JS(中)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading/you-dont-konw-js-1">你不知道的JS(上)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reading/zh.javascript.info">现代 JavaScript 教程</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Docusaurus 文档翻译</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/intro">简介</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/blog">博客</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/typescript-support">TypeScript支持</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">文档</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/docs/markdown-features">Markdown 特性</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/guides/api/client">Client API</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">博文整理</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archives">README.md</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archives/bookmarks">书签</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archives/docker">Docker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archives/editor">编辑器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archives/git-guides">Git</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archives/literature">诗和远方</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archives/mirrors">镜像列表</a></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_2WRA"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_CoMu"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">深入浅出 ES6（十一）：生成器 Generators，续篇</h1></header><div class="markdown"><section><b>本文仅用于本人学习和存档，原作者为 <a href="https://www.infoq.cn/" target="_blank">InfoQ.cn</a>, 文章所有权归 <a href="https://www.infoq.cn/" target="_blank">InfoQ.cn</a> 所有. 如有侵权请发送邮件至 alan.wei#live.com(<i>#换成@</i>) 删除此文.</b><hr></section><p><a href="https://www.infoq.cn/article/es6-in-depth-generators-continued" target="_blank" rel="noopener noreferrer">原文</a></p><p>欢迎回到深入浅出 ES6 专栏，望你在 ES6 探索之旅中收获知识与快乐！程序员们在工作之余应当补充些额外的知识，现在我们继续深入浅出生成器，我已经为你们准备好非常棒的讨论话题。</p><p>在之前的文章<a href="/docs/articles/es6-in-depth/2-generators">《深入浅出 ES6（三）：生成器 Generators 》</a>中，我为大家介绍了 ES6 中引入的新特性——生成器（Generators），我认为它是 ES6 中最具魔力的特性，很可能是异步编程下一步的发展方向。后来我这样写道：</p><blockquote><p>生成器还有更多未提及的特性，例如：<code>.throw()</code> 和<code>.return()</code> 方法、可选参数<code>.next()</code> 、<code>yield*</code> 表达式语法。由于行文过长，估计观众老爷们已然疲乏，我们应该学习一下生成器，暂时 <code>yield</code> 在这里，剩下的干货择机为大家献上。</p></blockquote><p>此时此刻，我们再续前缘。</p><p>阅读本文前，你最好先阅读一下<a href="/docs/articles/es6-in-depth/2-generators">文章的第 1 部分</a>，文章比较长，你可能看得云里雾里，但那儿有一只会说话的猫陪伴你，非常有趣！</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="快速回顾"></a>快速回顾<a class="hash-link" href="#快速回顾" title="Direct link to heading">#</a></h2><p>在第三篇文章中，我们着重讲解了生成器的基本行为。你可能对此感到 <em>陌生</em>，但是并不难理解。生成器函数与普通函数有很多相似之处，它们之间最大的不同是，普通函数一次执行完毕，而生成器函数体每次执行一部分，每当执行到一个 <code>yield</code> 表达式的时候就会暂停。</p><p>尽管在那篇文章中我们进行过详细解释，但我们始终未把所有特性结合起来给大家讲解示例。现在就让我们出发吧！</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">somewords</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">yield</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">yield</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;world&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword control-flow" style="font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> word </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">somewords</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">alert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">word</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>这段脚本简单易懂，但是如果你把代码中不同的比特位当做戏剧中的任务，你会发现它变得如此与众不同。穿上新衣的代码看起来是这样的：</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>译者注</h5></div><div class="admonition-content"><p>下面这是原作者创作的一个剧本，他将 ES6 中的各种函数和语法拟人化，以讲解生成器（Generator）的实现原理 </p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="场景---另一个世界的计算机，白天"></a>场景 - 另一个世界的计算机，白天<a class="hash-link" href="#场景---另一个世界的计算机，白天" title="Direct link to heading">#</a></h2><p>for loop 女士独自站在舞台上，戴着一顶安全帽，手里拿着一个笔记板，上面记载着所有的事情。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">for loop：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">（电话响起）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">somewords()！</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>generator 出现：这是一位高大的、有着一丝不苟绅士外表的黄铜机器人。
它看起来足够友善，但给人的感觉仍然是冷冰冰的金属。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  for loop：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            （潇洒地拍了拍她的手）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          好吧！我们去找些事儿做吧。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             （对 generator 说）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  .next()！</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>generator 动了起来，就像突然拥有了生命。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">                 generator：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       {value: &quot;hello&quot;, done: false}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>然而猝不及防的，它以一个滑稽的姿势停止了动作。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  for loop：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                   alert！</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>alert 小子飞快冲进舞台，眼睛大睁，上气不接下气。我们感觉的到他一向如此。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  for loop：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             对 user 说“hello”。</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>alert 小子转身冲下舞台。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">                   alert：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            （舞台下，大声尖叫）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               一切都静止了！</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             你正在访问的页面说，</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  “hello”！</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{1}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>停留了几秒钟后，alert 小子跑回舞台，穿过所有人滑停在 for loop 女士身边。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">                   alert：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                 user 说 ok。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  for loop：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           （潇洒地拍了拍她的手）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          好吧！我们去找些事儿做吧。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           （回到 generator 身边）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  .next()！</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>generator 又一次焕发生机。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">                 generator：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       {value: &quot;world&quot;, done: false}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>它换了个姿势又一次冻结。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">                 for loop：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                   alert！</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                   alert：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                （已经跑起来）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  正在搞定！</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              （舞台下，大声尖叫）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                一切都静止了！</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              你正在访问的页面说，</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  “world”！</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>又一次暂停，然后 alert 突然跋涉回到舞台，垂头丧气的。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">                   alert：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            user 再一次说 ok，但是…</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              但是请阻止这个页面</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               创建额外的对话。</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>他噘着嘴离开了。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  for loop：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            （潇洒地拍了拍她的手）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           好吧！我们去找些事儿做吧。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            （回到 generator 身边）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  .next()！</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>generator 第三次焕发生机。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">                 generator：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                 （庄严的）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       {value: undefined, done: true}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>它的头低下了，光芒从它的眼里消失。它不再移动。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  for loop</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               我的午餐时间到了。</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>她离开了。</p><p>一会儿，garbage collector（垃圾收集器）老头进入，捡起了奄奄一息的 generator，将它带下舞台。</p><p>好吧，这一出戏不太像 <em>哈姆雷特</em>，但你应该可以想象得出来。</p><p>正如你在戏剧中看到的，当生成器对象第一次出现时，它立即暂停了。每当调用它的<code>.next()</code>方法，它都会苏醒并向前执行一部分。</p><p>所有动作都是单线程同步的。请注意，无论何时永远只有一个真正活动的角色，角色们不会互相打断，亦不会互相讨论，他们轮流讲话，只要他们的话没有说完都可以继续说下去。（就像莎士比亚一样！）</p><p>每当for-of循环遍历生成器时，这出戏的某个版本就展开了。这些<code>.next()</code>方法调用序列永远不会在你的代码的任何角落出现，在剧本里我把它们都放在舞台上了，但是对于你和你的程序而言，所有这一切都应该在幕后完成，因为生成器和for-of循环就是被设计成通过迭代器接口联结工作的。</p><p>所以，总结一下到目前为止所有的一切：</p><ul><li>生成器对象是可以产生值的优雅的黄铜机器人。</li><li>每个生成器函数体构成的单一代码块就是一个机器人。</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="如何关停生成器"></a>如何关停生成器<a class="hash-link" href="#如何关停生成器" title="Direct link to heading">#</a></h2><p>我在第 1 部分没有提到这些繁琐的生成器特性：</p><ul><li>generator.return()</li><li><em>generator.next()</em> 的可选参数</li><li>generator.throw(error)</li><li>yield*</li></ul><p>如果你不理解这些特性存在得意义，就很难对它们提起兴趣，更不用说理解它们的实现细节，所以我选择直接跳过。但是当我们深入学习生成器时，势必要仔细了解这些特性的方方面面。</p><p>你或许曾使用过这样的模式：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">dothings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">setup</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ... 做一些事情</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">cleanup</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">dothings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>清理（cleanup）过程包括关闭连接或文件，释放系统资源，或者只是更新 dom 来关闭“运行中”的加载动画。我们希望无论任务成功完成与否都触发清理操作，所以执行流入到<code>finally</code>代码块。</p><p>那么生成器中的清理操作看起来是什么样的呢？</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">producevalues</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">setup</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ... 生成一些值</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">cleanup</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword control-flow" style="font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> value </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">producevalues</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">work</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>这段代码看起来很好，但是这里有一个问题：我们没在<code>try</code>代码块中调用<code>work(value)</code>，如果它抛出异常，我们的清理步骤会如何执行呢？</p><p>或者假设for-of循环包含一条<code>break</code>语句或<code>return</code>语句。清理步骤又会如何执行呢？</p><p>放心，清理步骤无论如何都会执行，ES6 已经为你做好了一切。</p><p>我们第一次讨论迭代器和for-of 循环时曾说过，迭代器接口支持一个可选的<code>.return()</code>方法，每当迭代在迭代器返回<code>{done:true}</code>之前退出都会自动调用这个方法。生成器支持这个方法， <code>mygenerator.return()</code>会触发生成器执行任一<code>finally</code>代码块然后退出，就好像当前的生成暂停点已经被秘密转换为一条<code>return</code>语句一样。</p><p>注意，<code>.return()</code>方法并不是在 <em>所有的</em> 上下文中都会被自动调用，只有当使用了迭代协议的情况下才会触发该机制。所以也有可能生成器没执行<code>finally</code>代码块就直接被垃圾回收了。</p><p>如何在舞台上模拟这些特性？生成器被冻结在一个需要一些配置的任务（例如，建造一幢摩天大楼）中间。突然有人抛出一个错误！for循环捕捉到这个错误并将它放置在一遍，她告诉生成器执行<code>.return()</code>方法。生成器冷静地拆除了所有脚手架并停工。然后for循环取回错误，继续执行正常的异常处理过程。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="生成器主导模式"></a>生成器主导模式<a class="hash-link" href="#生成器主导模式" title="Direct link to heading">#</a></h2><p>到目前为止，我们在剧本中看到的生成器（generator）和使用者（user）之间的对话非常有限，现在换一种方式继续解释：</p><p><img src="https://hacks.mozilla.org/files/2015/07/generator-messages-small.png" alt="生成器主导模式"></p><p>在这里使用者主导一切流程，生成器根据需要完成它的任务，但这不是使用生成器进行编程的唯一方式。</p><p>在第 1 部分中我曾经说过，生成器可以用来实现异步编程，完成你用异步回调或 promise 链所做的一切。我知道你一定想知道它是如何实现的，为什么 yield 的能力（这可是生成器专属的特殊能力）足够应对这些任务。毕竟，异步代码不仅产生（yield）数据，还会 <em> 触发事件 </em>，比如从文件或数据库中调用数据，向服务器发起请求并返回事件循环来等待异步过程结束。生成器如何实现这一切？它又是如何不借助回调力量从文件、数据库或服务器中接受数据？</p><p>为了开始找出答案，考虑一下如果<code>.next()</code>的调用者只有一种方法可以传值返回给生成器会发生什么？仅仅是这一点改变，我们就可能创造一种全新的会话形式：</p><p><img src="https://hacks.mozilla.org/files/2015/07/generator-messages-2-small.png" alt="infoq"></p><p>事实上，生成器的<code>.next()</code>方法接受一个可选参数，参数稍后会作为<code>yield</code>表达式的返回值出现在生成器中。那就是说，<code>yield</code>语句与<code>return</code>语句不同，它是一个只有当生成器恢复时才会有值的表达式。</p><p><code>var results = yield getdataandlatte(request.areacode);</code>这一行代码完成了许多功能：</p><ul><li>调用<code>getdataandlatte()</code>，假设函数返回我们在截图中看到的字符串“<em>get me the database records for area code...</em>”。</li><li>暂停生成器，生成字符串值。</li><li>此时可以暂停任意长的时间。</li><li>最终，直到有人调用<code>.next({data: ..., coffee: ...})</code>，我们将这个对象存储在本地变量<code>results</code>中并继续执行下一行代码。</li></ul><p>下面这段代码完整地展示了这一行代码完整的上下文会话：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">handle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> results </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">yield</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getdataandlatte</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">areacode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  results</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">coffee</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">drink</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> target </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mosturgentrecord</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">results</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">yield</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">updatestatus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ready&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><code>yield</code>仍然保持着它的原始含义：暂停生成器，返回值给调用者。但是确实也发生了变化！这里的生成器期待来自调用者的非常具体的支持行为，就好像调用者是它的行政助理一样。</p><p>普通函数则与之不同，通常更倾向于满足调用者的需求。但是你可以借助生成器创造一段对话，拓展生成器与其调用者之间可能存在的关系。</p><p>这个行政助理生成器运行器可能是什么样的？它大可不必很复杂，就像这样：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">rungeneratoronce</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">g</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> status </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> g</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">next</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">status</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">done</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">return</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// phew!</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 生成器请我们去获取一些东西并且</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 当我们搞定的时候再回调它</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">doasynchronousworkincludingespressomachineoperations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">status</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">error</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> nextresult</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">rungeneratoronce</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">g</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> nextresult</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>为了让这段代码运行起来，我们必须创建一个生成器并且运行一次，像这样：</p><p><code>rungeneratoronce(handle(request), undefined);</code>在之前的文章中，我一个库的示例中提到<code>Q.async()</code>，在那个库中，生成器是可以根据需要自动运行的异步过程。 <code>rungeneratoronce</code> 正式这样的一个具体实现。事实上，生成器一般会生成 Promise 对象来告诉调用者要做的事情，而不是生成字符串来大声告诉他们。</p><p>如果你已经理解了 Promise 的概念，现在又理解了生成器的概念，你可以尝试修改 <code>rungeneratoronce</code> 的代码来支持 Promise。这个任务不简单，但是一旦成功，你将能够用 Promise 线性书写复杂的异步算法，而不仅仅通过.then()方法或回调函数来实现异步功能。</p><p>你是否有看到 <code>rungeneratoronce</code> 的错误处理过程？答案一定是没有，因为上面的示例中直接忽略了错误！</p><p>是的，那样做不好，但是如果我们想要以某种方法给生成器报告错误，可以尝试一下这个方法：当有错误产生时，不要继续调用<code>generator.next(result)</code>方法，而应该调用<code>generator.throw(error)</code>方法来抛出<code>yield</code>表达式，进而像.<code>return()</code>方法一样终止生成器的执行。但是如果当前的生成暂停点在一个<code>try</code>代码块中，那么会<code>catch</code>到错误并执行<code>finally</code>代码块，生成器就恢复执行了。</p><p>另一项艰巨的任务来啦，你需要修改<code>rungeneratoronce</code>来确保<code>.throw()</code>方法能够被恰当地调用。请记住，生成器内部抛出的异常总是会传播到调用者。所以无论生成器是否捕获错误，<code>generator.throw(error)</code>都会抛出error并立即返回给你。</p><p>当生成器执行到一个<code>yield</code>表达式并暂停后可以实现以下功能：</p><ul><li>调用<code>generator.next(value)</code>，生成器从离开的地方恢复执行。</li><li>调用<code>generator.return()</code>，传递一个可选值，生成器只执行<code>finally</code>代码块并不再恢复执行。</li><li>调用<code>generator.throw(error)</code>，生成器表现得像是<code>yield</code>表达式调用一个函数并抛出错误。</li><li>或者，什么也不做，生成器永远保持冻结状态。（是的，对于一个生成器来说，很可能执行到一个<code>try</code>代码块，永不执行<code>finally</code>代码块。这种状态下的生成器可以被垃圾收集器回收。）</li></ul><p>看起来生成器函数与普通函数的复杂度相当，只有<code>.return()</code>方法显得不太一样。</p><p>事实上，<code>yield</code>与函数调用有许多共通的地方。当你调用一个函数，你就暂时停止了，对不对？你调用的函数取得主导权，它可能返回值，可能抛出错误，或者永远循环下去。</p><p>我再展示一个特性。假设我们写一个简单的生成器函数联结两个可迭代对象：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">concat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">iter1</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> iter2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> value </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> iter1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">yield</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> value </span><span class="token keyword" style="font-style:italic">of</span><span class="token plain"> iter2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword control-flow" style="font-style:italic">yield</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>es6 支持这样的简写方式：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">concat</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">iter1</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> iter2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">yield</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> iter1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">yield</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> iter2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>普通<code>yield</code>表达式只生成一个值，而<code>yield*</code>表达式可以通过迭代器进行迭代生成 <em>所有</em> 的值。</p><p>这个语法也可以用来解决另一个有趣的问题：在生成器中调用生成器。在普通函数中，我们可以从将一个函数重构为另一个函数并保留所有行为。很显然我们也想重构生成器，但我们需要一种调用提取出来的子例程的方法，我们还需要确保，子例程能够生成之前生成的每一个值。<code>yield*</code>可以帮助我们实现这一目标。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">factoredoutchunkofcode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">refactoredfunction</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword control-flow" style="font-style:italic">yield</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">factoredoutchunkofcode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>考虑一下这样一个场景：一个黄铜机器人将子任务委托给另一个机器人，函数对组织同步代码来说至关重要，所以这种思想可以使基于生成器特性的大型项目保持简洁有序。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="退场"></a>退场<a class="hash-link" href="#退场" title="Direct link to heading">#</a></h2><p>好啦，这就是有关生成器的全部内容！我希望你如我般享受，很高兴回来。</p><p>下一篇文章，我们会讨论另一种令人兴奋的特性，它是在 es6 中加入的一种全新的对象，它很微妙，又很复杂，你可能到最后都不知道自己一直在使用这一特性。下一次请记得回来，我们一起深入浅出 es6 代理（proxy）。</p><div>感谢<a href="http://www.infoq.com/cn/author/%E5%88%98%E6%8C%AF%E6%B6%9B">刘振涛</a>对本文的策划， <a href="http://www.infoq.com/cn/author/%E5%BE%90%E5%B7%9D">徐川</a>对本文的审校。</div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/alanwei43/blog/tree/master/src/docs/articles/es6-in-depth/10-generators-continued.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/articles/es6-in-depth/9-collections"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 深入浅出 ES6（十）：集合</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/articles/es6-in-depth/11-proxies-and-reflect"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">深入浅出 ES6（十二）：代理 Proxies »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#快速回顾" class="table-of-contents__link">快速回顾</a></li><li><a href="#场景---另一个世界的计算机，白天" class="table-of-contents__link">场景 - 另一个世界的计算机，白天</a></li><li><a href="#如何关停生成器" class="table-of-contents__link">如何关停生成器</a></li><li><a href="#生成器主导模式" class="table-of-contents__link">生成器主导模式</a></li><li><a href="#退场" class="table-of-contents__link">退场</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">文章列表</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/articles/es6-in-depth/0-introduction">深入浅出ES6 - InfoQ.cn</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/articles/why-java-sucks-and-csharp-rocks/1-compare-purpose">Why Java Sucks and C# Rocks - 赵劼</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/reading">阅读笔记</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/archives/git-guides">博文归档</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">文档翻译</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/guides/blog">Docusaurus Blog</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/guides/docs/markdown-features">Docusaurus Markdown</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">更多</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/tool/wh-fgj/">武汉房管局住房统计数据</a></li><li class="footer__item"><a href="https://github.com/alanwei43/node-auto-update" target="_blank" rel="noopener noreferrer" class="footer__link-item">node-auto-update - GitHub</a></li><li class="footer__item"><a href="https://github.com/alanwei43/docker-puppeteer" target="_blank" rel="noopener noreferrer" class="footer__link-item">docker-puppeteer - GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Alan's Blog</div></div></div></footer></div>
<script src="/styles.ef979260.js"></script>
<script src="/runtime~main.b3aa57c2.js"></script>
<script src="/main.97dbbfc1.js"></script>
<script src="/1.d90096e2.js"></script>
<script src="/2.c8f058bf.js"></script>
<script src="/3.53cf90bc.js"></script>
<script src="/1be78505.1f337c7f.js"></script>
<script src="/262.877daa33.js"></script>
<script src="/935f2afb.d2a7b4e4.js"></script>
<script src="/17896441.0276eaa7.js"></script>
<script src="/c6ad4fa6.3a81abaf.js"></script>
</body>
</html>