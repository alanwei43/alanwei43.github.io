"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[32424],{28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>i});var o=n(96540);const r={},s=o.createContext(r);function a(e){const t=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(s.Provider,{value:t},e.children)}},38896:e=>{e.exports=JSON.parse('{"permalink":"/blog/2022/04/12/git-undo-reset","editUrl":"https://github.com/alanwei43/blog/tree/master/src/blog/2022/04/12-git-undo-reset.md","source":"@site/src/blog/2022/04/12-git-undo-reset.md","title":"\u53d6\u6d88 git reset \u64cd\u4f5c","description":"\u53d6\u6d88\u7c7b\u4f3c git reset --soft HEAD~1 \u64cd\u4f5c:","date":"2022-04-12T00:00:00.000Z","tags":[{"inline":true,"label":"git","permalink":"/blog/tags/git"}],"readingTime":1.295,"hasTruncateMarker":true,"authors":[{"name":"Alan","title":"Maintainer of blog","url":"https://github.com/alanwei43","imageURL":"https://github.com/alanwei43.png","key":null,"page":null}],"frontMatter":{"title":"\u53d6\u6d88 git reset \u64cd\u4f5c","author":"Alan","author_title":"Maintainer of blog","author_url":"https://github.com/alanwei43","author_image_url":"https://github.com/alanwei43.png","tags":["git"],"draft":false,"hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"undici \u7b80\u4ecb - Node.js","permalink":"/blog/2022/04/22/nodejs-undici-intro"},"nextItem":{"title":"JavaScript\u6570\u7ec4\u4e71\u5e8f","permalink":"/blog/2022/04/09/javascript-array-shuffle"}}')},54190:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>o,toc:()=>h});var o=n(38896),r=n(74848),s=n(28453);const a={title:"\u53d6\u6d88 git reset \u64cd\u4f5c",author:"Alan",author_title:"Maintainer of blog",author_url:"https://github.com/alanwei43",author_image_url:"https://github.com/alanwei43.png",tags:["git"],draft:!1,hide_table_of_contents:!1},i=void 0,l={authorsImageUrls:[void 0]},h=[{value:"Short answer",id:"short-answer",level:2},{value:"Long answer",id:"long-answer",level:2}];function c(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["\u53d6\u6d88\u7c7b\u4f3c ",(0,r.jsx)(t.code,{children:"git reset --soft HEAD~1"})," \u64cd\u4f5c:"]}),"\n",(0,r.jsx)(t.h2,{id:"short-answer",children:"Short answer"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bahs",children:"git reset 'HEAD@{1}'\n"})}),"\n",(0,r.jsx)(t.h2,{id:"long-answer",children:"Long answer"}),"\n",(0,r.jsx)(t.p,{children:"Git keeps a log of all ref updates (e.g., checkout, reset, commit, merge). You can view it by typing:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"git reflog\n"})}),"\n",(0,r.jsx)(t.p,{children:"Somewhere in this list is the commit that you lost. Let's say you just typed git reset HEAD~ and want to undo it. My reflog looks like this:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"$ git reflog\n3f6db14 HEAD@{0}: HEAD~: updating HEAD\nd27924e HEAD@{1}: checkout: moving from d27924e0fe16776f0d0f1ee2933a0334a4787b4c\n[...]\n"})}),"\n",(0,r.jsxs)(t.p,{children:["The first line says that HEAD 0 positions ago (in other words, the current position) is 3f6db14; it was obtained by resetting to HEAD~. The second line says that HEAD 1 position ago (in other words, the state before the reset) is d27924e. It was obtained by checking out a particular commit (though that's not important right now). So, to undo the reset, run ",(0,r.jsx)(t.code,{children:"git reset HEAD@{1}"})," (or git reset d27924e)."]}),"\n",(0,r.jsx)(t.p,{children:"If, on the other hand, you've run some other commands since then that update HEAD, the commit you want won't be at the top of the list, and you'll need to search through the reflog."}),"\n",(0,r.jsx)(t.p,{children:"One final note: It may be easier to look at the reflog for the specific branch you want to un-reset, say master, rather than HEAD:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bahs",children:"$ git reflog show master\nc24138b master@{0}: merge origin/master: Fast-forward\n90a2bf9 master@{1}: merge origin/master: Fast-forward\n[...]\n"})}),"\n",(0,r.jsx)(t.p,{children:"This should have less noise it in than the general HEAD reflog."}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsxs)(t.p,{children:["\u6765\u6e90",(0,r.jsx)(t.a,{href:"https://stackoverflow.com/questions/2510276/how-to-undo-git-reset",children:"How to undo 'git reset'?"})]}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);