"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[34046],{3020:e=>{e.exports=JSON.parse('{"permalink":"/blog/2022/01/24/ssh-no-matching-host-key-type-found","editUrl":"https://github.com/alanwei43/blog/tree/master/src/blog/2022/01/24-ssh-no-matching-host-key-type-found.md","source":"@site/src/blog/2022/01/24-ssh-no-matching-host-key-type-found.md","title":"\u89e3\u51b3SSH no matching host key type found \u95ee\u9898","description":"\u89e3\u51b3\u901a\u8fc7git\u534f\u8bae\u514b\u9686\u4ed3\u5e93\u5230\u672c\u5730, \u6216\u8005SSH\u8fdc\u7a0b\u673a\u5668\u65f6\u8fd4\u56de\u7684 no matching host key type found","date":"2022-01-24T00:00:00.000Z","tags":[{"inline":true,"label":"ssh","permalink":"/blog/tags/ssh"},{"inline":true,"label":"git","permalink":"/blog/tags/git"},{"inline":true,"label":"openssh","permalink":"/blog/tags/openssh"}],"readingTime":2.265,"hasTruncateMarker":true,"authors":[{"name":"Alan","title":"Maintainer of blog","url":"https://github.com/alanwei43","imageURL":"https://avatars.githubusercontent.com/u/2927578?s=460&u=153132e7aa3be8295a1703af9b759ca22338f557&v=4","key":null,"page":null}],"frontMatter":{"title":"\u89e3\u51b3SSH no matching host key type found \u95ee\u9898","author":"Alan","author_title":"Maintainer of blog","author_url":"https://github.com/alanwei43","author_image_url":"https://avatars.githubusercontent.com/u/2927578?s=460&u=153132e7aa3be8295a1703af9b759ca22338f557&v=4","tags":["ssh","git","openssh"],"description":"\u89e3\u51b3\u901a\u8fc7git\u534f\u8bae\u514b\u9686\u4ed3\u5e93\u5230\u672c\u5730, \u6216\u8005SSH\u8fdc\u7a0b\u673a\u5668\u65f6\u8fd4\u56de\u7684 no matching host key type found","draft":false,"hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"Flutter JSON \u5e8f\u5217\u5316","permalink":"/blog/2022/01/25/flutter-json-seriealize"},"nextItem":{"title":"\u89e3\u51b3 Ubuntu/Debian SSH \u8fde\u63a5\u65f6\u8fd4\u56de\u7684 Connection refused","permalink":"/blog/2022/01/15/ubuntu-ssh-connection-refused"}}')},20816:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>h,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>n,toc:()=>l});var n=t(3020),o=t(74848),r=t(28453);const i={title:"\u89e3\u51b3SSH no matching host key type found \u95ee\u9898",author:"Alan",author_title:"Maintainer of blog",author_url:"https://github.com/alanwei43",author_image_url:"https://avatars.githubusercontent.com/u/2927578?s=460&u=153132e7aa3be8295a1703af9b759ca22338f557&v=4",tags:["ssh","git","openssh"],description:"\u89e3\u51b3\u901a\u8fc7git\u534f\u8bae\u514b\u9686\u4ed3\u5e93\u5230\u672c\u5730, \u6216\u8005SSH\u8fdc\u7a0b\u673a\u5668\u65f6\u8fd4\u56de\u7684 no matching host key type found",draft:!1,hide_table_of_contents:!1},a=void 0,h={authorsImageUrls:[void 0]},l=[{value:"\u89e3\u51b3\u529e\u6cd5",id:"\u89e3\u51b3\u529e\u6cd5",level:2},{value:"\u4e3a\u4ec0\u4e48\u4f1a\u6709\u8fd9\u4e2a\u9519\u8bef",id:"\u4e3a\u4ec0\u4e48\u4f1a\u6709\u8fd9\u4e2a\u9519\u8bef",level:2}];function c(e){const s={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://ttys3.dev/post/openssh-8-8-p1-no-matching-host-key-type-found-their-offer-ssh-rsa/",children:"\u539f\u6587 Solution to openssh-8.8-p1 update: no matching host key type found. Their offer: ssh-rsa"})}),"\n",(0,o.jsx)(s.h2,{id:"\u89e3\u51b3\u529e\u6cd5",children:"\u89e3\u51b3\u529e\u6cd5"}),"\n",(0,o.jsxs)(s.p,{children:["\u5982\u679c\u6700\u8fd1\u5347\u7ea7\u5230\u4e86 ",(0,o.jsx)(s.strong,{children:"openssh 8.8-p1"})," \u7248, \u4f60\u4f1a\u53d1\u73b0\u8fde\u63a5\u67d0\u4e9b\u4e4b\u524d\u8fde\u63a5\u5f97\u597d\u597d\u7684\u670d\u52a1\u5668\u7a81\u7136\u65e0\u6cd5\u8fde\u63a5:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"Unable to negotiate with x.x.x.x port 2222: no matching host key type found. Their offer: ssh-rsa\n"})}),"\n",(0,o.jsx)(s.p,{children:"\u6216\u8005\u4ed3\u5e93\u65e0\u6cd5clone:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"> git clone git@github.com:user/repository.git\n\nCloning into 'xxxx'...\nUnable to negotiate with x.x.x.x port 22: no matching host key type found. Their offer: ssh-rsa,ssh-dss\nfatal: Could not read from remote repository.\n\nPlease make sure you have the correct access rights\n"})}),"\n",(0,o.jsxs)(s.p,{children:["\u89e3\u51b3\u529e\u6cd5\u662f",(0,o.jsx)(s.code,{children:"ssh"}),"\u547d\u4ee4\u6307\u5b9a\u7b97\u6cd5:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"ssh -o HostKeyAlgorithms=+ssh-rsa -o PubkeyAcceptedKeyTypes=+ssh-rsa  user@host -p 2222\n"})}),"\n",(0,o.jsxs)(s.p,{children:["\u4e0a\u9762\u6bd4\u8f83\u9ebb\u70e6, \u53ef\u4ee5\u4fee\u6539ssh\u914d\u7f6e\u6587\u4ef6 ",(0,o.jsx)(s.em,{children:"~/.ssh/config"}),", \u5bf9\u4e8e\u65e0\u6cd5\u6210\u529f\u8fde\u63a5\u7684host, \u589e\u52a0\u914d\u7f6e\u9879:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-config",metastring:'title="~/.ssh/config"',children:"HostKeyAlgorithms +ssh-rsa\nPubkeyAcceptedKeyTypes +ssh-rsa\n"})}),"\n",(0,o.jsx)(s.p,{children:"\u5b8c\u6574\u914d\u7f6e\u5982\u4e0b:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-config",metastring:'title="~/.ssh/config"',children:"Host ssh.alanwei.com\n  HostName ssh.alanwei.com\n  User alan\n  Port 22\n  HostKeyAlgorithms +ssh-rsa\n  PubkeyAcceptedKeyTypes +ssh-rsa\n"})}),"\n",(0,o.jsx)(s.admonition,{type:"info",children:(0,o.jsxs)(s.p,{children:["\u5b8c\u6574\u914d\u7f6e\u91cc\u7684 ",(0,o.jsx)(s.code,{children:"HostName"}),", ",(0,o.jsx)(s.code,{children:"User"}),", ",(0,o.jsx)(s.code,{children:"Port"})," \u53ef\u4ee5\u7701\u7565"]})}),"\n",(0,o.jsxs)(s.p,{children:["\u6216\u8005\u5bf9\u6240\u6709",(0,o.jsx)(s.code,{children:"Host"}),"\u6307\u5b9a:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-config",metastring:'title="~/.ssh/config"',children:"Host *\n  ServerAliveInterval 10\n  HostKeyAlgorithms +ssh-rsa\n  PubkeyAcceptedKeyTypes +ssh-rsa\n"})}),"\n",(0,o.jsx)(s.h2,{id:"\u4e3a\u4ec0\u4e48\u4f1a\u6709\u8fd9\u4e2a\u9519\u8bef",children:"\u4e3a\u4ec0\u4e48\u4f1a\u6709\u8fd9\u4e2a\u9519\u8bef"}),"\n",(0,o.jsx)(s.p,{children:"\u6839\u636e OpenSSH Release Notes:"}),"\n",(0,o.jsxs)(s.admonition,{type:"info",children:[(0,o.jsx)(s.p,{children:"Future deprecation notice\nIt is now possible[1] to perform chosen-prefix attacks against the SHA-1 algorithm for less than USD$50K."}),(0,o.jsx)(s.p,{children:"In the SSH protocol, the \u201cssh-rsa\u201d signature scheme uses the SHA-1 hash algorithm in conjunction with the RSA public key algorithm. OpenSSH will disable this signature scheme by default in the near future."}),(0,o.jsx)(s.p,{children:"Note that the deactivation of \u201cssh-rsa\u201d signatures does not necessarily require cessation of use for RSA keys. In the SSH protocol, keys may be capable of signing using multiple algorithms. In particular, \u201cssh-rsa\u201d keys are capable of signing using \u201crsa-sha2-256\u201d (RSA/SHA256), \u201crsa-sha2-512\u201d (RSA/SHA512) and \u201cssh-rsa\u201d (RSA/SHA1). Only the last of these is being turned off by default."})]}),"\n",(0,o.jsxs)(s.p,{children:["\u4e5f\u5c31\u662f\u8bf4 8.8p1 \u7248\u7684 openssh \u7684 ssh \u5ba2\u6237\u7aef\u9ed8\u8ba4\u7981\u7528\u4e86 ",(0,o.jsx)(s.code,{children:"ssh-rsa"})," \u7b97\u6cd5, \u4f46\u662f\u5bf9\u65b9\u670d\u52a1\u5668\u53ea\u652f\u6301 ",(0,o.jsx)(s.code,{children:"ssh-rsa"}),", \u5f53\u4f60\u4e0d\u80fd\u81ea\u5df1\u5347\u7ea7\u8fdc\u7a0b\u670d\u52a1\u5668\u7684 openssh \u7248\u672c\u6216\u4fee\u6539\u914d\u7f6e\u8ba9\u5b83\u4f7f\u7528\u66f4\u5b89\u5168\u7684\u7b97\u6cd5\u65f6, \u5728\u672c\u5730 ssh \u9488\u5bf9\u8fd9\u4e9b\u65e7\u7684ssh server\u91cd\u65b0\u542f\u7528 ",(0,o.jsx)(s.code,{children:"ssh-rsa"})," \u4e5f\u662f\u4e00\u79cd\u6743\u5b9c\u4e4b\u6cd5."]})]})}function d(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>i,x:()=>a});var n=t(96540);const o={},r=n.createContext(o);function i(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);