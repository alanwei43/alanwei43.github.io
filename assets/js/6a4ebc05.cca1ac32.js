"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[51613],{26958:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"core-java-for-the-impatient","title":"Core Java for the Impatient","description":"Object.finalize()","source":"@site/src/docs/reading/core-java-for-the-impatient.md","sourceDirName":".","slug":"/core-java-for-the-impatient","permalink":"/docs/reading/core-java-for-the-impatient","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1616214992000,"frontMatter":{"title":"Core Java for the Impatient"},"sidebar":"tutorialSidebar","previous":{"title":"HTTPS \u6743\u5a01\u6307\u5357 \u5728\u670d\u52a1\u5668\u548cWeb\u5e94\u7528\u4e0a\u90e8\u7f72SSL/TLS\u548cPKI","permalink":"/docs/reading/bulletproff-ssl-and-tls-understanding-and-deploying-ssl-tls-and-pki-to-secure-servers-and-web-applications"},"next":{"title":"\u300aJavaScript \u609f\u9053\u300b \u7b14\u8bb0","permalink":"/docs/reading/how-javascript-works"}}');var l=i(74848),s=i(28453);const r={title:"Core Java for the Impatient"},c=void 0,t={},d=[{value:"Object.finalize()",id:"objectfinalize",level:2},{value:"2.4.2 \u9759\u6001\u5e38\u91cf",id:"242-\u9759\u6001\u5e38\u91cf",level:3},{value:"2.4.3 \u9759\u6001\u521d\u59cb\u5316\u5757",id:"243-\u9759\u6001\u521d\u59cb\u5316\u5757",level:3},{value:"2.4.5 \u5de5\u5382\u65b9\u6cd5",id:"245-\u5de5\u5382\u65b9\u6cd5",level:3},{value:"2.5.1 \u5305\u7684\u58f0\u660e",id:"251-\u5305\u7684\u58f0\u660e",level:3},{value:"2.5.2 \u7c7b\u8def\u5f84",id:"252-\u7c7b\u8def\u5f84",level:3},{value:"2.6.2",id:"262",level:3},{value:"\u63a5\u53e3\u548clambda\u8868\u8fbe\u5f0f",id:"\u63a5\u53e3\u548clambda\u8868\u8fbe\u5f0f",level:2},{value:"3.1.7 \u5e38\u91cf",id:"317-\u5e38\u91cf",level:3},{value:"3.7.2 \u8bbf\u95ee\u6765\u81ea\u95ed\u5408\u4f5c\u7528\u57df\u7684\u53d8\u91cf",id:"372-\u8bbf\u95ee\u6765\u81ea\u95ed\u5408\u4f5c\u7528\u57df\u7684\u53d8\u91cf",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"objectfinalize",children:"Object.finalize()"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsxs)(n.a,{href:"https://www.infoq.com/news/2017/03/Java-Finalize-Deprecated",children:[(0,l.jsx)(n.code,{children:"finalize"})," is marked as deprecated in Java 9"]}),"."]}),"\n",(0,l.jsxs)(n.p,{children:["\u53ef\u4ee5\u5728\u7a0b\u5e8f\u7ed3\u675f\u4e4b\u524d\u8c03\u7528",(0,l.jsx)(n.code,{children:"Runtime"}),"\u7684",(0,l.jsx)(n.code,{children:"addShutdownHook"}),"\u65b9\u6cd5\u6765\u6ce8\u518c\u7a0b\u5e8f\u7ed3\u675f\u7684\u94a9\u5b50:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'Runtime.getRuntime().addShutdownHook(new Thread(() -> {\n\tSystem.out.println("addShutdownHook");\n}));\n'})}),"\n",(0,l.jsx)(n.h3,{id:"242-\u9759\u6001\u5e38\u91cf",children:"2.4.2 \u9759\u6001\u5e38\u91cf"}),"\n",(0,l.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,l.jsx)(n.code,{children:"static final"}),"\u58f0\u660e\u9759\u6001\u5e38\u91cf"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6700\u597d\u5728\u7c7b\u5b57\u6bb5(\u9759\u6001\u5b57\u6bb5)\u5171\u4eab\u4e00\u4e2a\u968f\u673a\u6570\u751f\u6210\u5668, \u76f8\u5bf9\u4e8e\u5b9e\u4f8b\u5b57\u6bb5\u7684\u968f\u673a\u6570\u751f\u6210\u5668\u66f4\u8282\u7701\u8d44\u6e90\u548c\u5b89\u5168.(\u968f\u673a\u6570\u751f\u6210\u5668\u6700\u597d\u5171\u7528\u4e00\u4e2a)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"243-\u9759\u6001\u521d\u59cb\u5316\u5757",children:"2.4.3 \u9759\u6001\u521d\u59cb\u5316\u5757"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'public class Employee{\n\tprivate static final String hello;\n\tstatic {\n\t\thello = "world";\n\t}\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"245-\u5de5\u5382\u65b9\u6cd5",children:"2.4.5 \u5de5\u5382\u65b9\u6cd5"}),"\n",(0,l.jsx)(n.p,{children:"\u9759\u6001\u65b9\u6cd5\u5e38\u89c1\u7684\u4f7f\u7528\u5c31\u662f\u5de5\u5382\u65b9\u6cd5, \u4e5f\u5c31\u662f\u8fd4\u56de\u4e00\u4e2a\u7d2f\u7684\u65b0\u5b9e\u4f8b\u7684\u9759\u6001\u65b9\u6cd5."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u83b7\u53d6\u7c7b\u5b9e\u4f8b, \u6784\u9020\u51fd\u6570\u53ea\u80fd\u901a\u8fc7\u53c2\u6570\u7c7b\u578b\u548c\u6570\u91cf\u6765\u533a\u5206, \u800c\u9759\u6001\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u65b9\u6cd5\u540d\u6765\u533a\u5206."}),"\n",(0,l.jsx)(n.li,{children:"\u6784\u9020\u51fd\u6570\u53ea\u80fd\u8fd4\u56de\u7c7b\u5b9e\u4f8b, \u9759\u6001\u65b9\u6cd5\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a\u5b50\u7c7b\u5b9e\u4f8b."}),"\n",(0,l.jsx)(n.li,{children:"\u9759\u6001\u65b9\u6cd5\u53ef\u4ee5\u8fd4\u56de\u5171\u4eab\u5b9e\u4f8b(\u6bd4\u5982\u5355\u4f8b)."}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"251-\u5305\u7684\u58f0\u660e",children:"2.5.1 \u5305\u7684\u58f0\u660e"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u5f53\u4ece\u6587\u4ef6\u7cfb\u7edf\u8bfb\u53d6\u7c7b\u6587\u4ef6\u65f6, \u8def\u5f84\u540d\u79f0\u5fc5\u987b\u5339\u914d\u5305\u540d\u79f0, \u4f8b\u5982\u6587\u4ef6",(0,l.jsx)(n.code,{children:"Employee.class"}),"\u5fc5\u987b\u5728\u5b50\u76ee\u5f55",(0,l.jsx)(n.code,{children:"com/horstmann/corejava"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"252-\u7c7b\u8def\u5f84",children:"2.5.2 \u7c7b\u8def\u5f84"}),"\n",(0,l.jsx)(n.p,{children:"\u4f60\u53ef\u4ee5\u4f7f\u7528JAR\u6587\u4ef6\u5c06\u7a0b\u5e8f\u6253\u5305:"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"jar cvfe com.company.MainClass com/company/*.class"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u7136\u540e\u8fd0\u884c\u7a0b\u5e8f:"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"java -jar program.jar"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"javac"}),"\u548c",(0,l.jsx)(n.code,{children:"java"}),"\u547d\u4ee4\u90fd\u6709",(0,l.jsx)(n.code,{children:"-classpath"}),"\u9009\u9879, \u53ef\u4ee5\u7f29\u5199\u4e3a",(0,l.jsx)(n.code,{children:"-cp"}),", \u7528\u4e8e\u6307\u5b9a\u5f15\u7528\u7684\u7c7b\u5e93\u6587\u4ef6\u7684jar\u548c\u76ee\u5f55:"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"java -classpath .:../libs/lib1.jar:../libs/lib2.jar com.company.MainClass"}),"\n"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["\u5728Windows\u7cfb\u7edf\u4e2d\u5c06",(0,l.jsx)(n.code,{children:":"}),"\u66ff\u6362\u6210",(0,l.jsx)(n.code,{children:";"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"262",children:"2.6.2"}),"\n",(0,l.jsxs)(n.p,{children:["\u9759\u6001\u5d4c\u5957\u7c7b\u4f7f\u7528",(0,l.jsx)(n.code,{children:"static"}),"\u8fdb\u884c\u4fee\u9970:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"public class Network {\n    public static class Member {}\n\n    private List<Member> members = new ArrayList<>();\n}\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u5185\u90e8\u7c7b\u4e0d\u4f7f\u7528",(0,l.jsx)(n.code,{children:"static"}),"\u4fee\u9970, \u800c\u4e14\u5185\u90e8\u7c7b\u77e5\u9053\u81ea\u5df1\u5c5e\u4e8e\u54ea\u4e2a\u7236\u7c7b\u7684\u5b9e\u4f8b, \u4e5f\u5c31\u662f\u80fd\u591f\u8bbf\u95ee\u7236\u7c7b\u7684\u5b9e\u4f8b\u5b57\u6bb5\u548c\u65b9\u6cd5:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'public class Network {\n    public class Member {\n        //\u9664\u4e86\u7f16\u8bd1\u65f6\u5e38\u91cf\u5916, \u5185\u90e8\u7c7b\u4e0d\u80fd\u58f0\u660e\u9759\u6001\u6210\u5458.\n        public static final String constant_variable = "is ok";\n        public static String static_variable = "error code";\n        \n        private String name;\n\n        public Member(String name) {\n            this.name = name;\n        }\n\n        public void remove() {\n            members.remove(this);\n            //OR\n            Network.this.members.remove(this);\n        }\n\n        //\u68c0\u67e5Member\u5bf9\u8c61\u662f\u5426\u5c5e\u4e8e\u67d0\u4e2a\u7279\u5b9a\u7f51\u7edc(Network)\n        public boolean belongsTo(Network n) {\n            return Network.this == n;\n        }\n    }\n\n    private List<Member> members = new ArrayList<>();\n\n    public void add(String name) {\n        this.members.add(new Member(name));\n        //OR\n        this.members.add(this.new Member(name));\n    }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u63a5\u53e3\u548clambda\u8868\u8fbe\u5f0f",children:"\u63a5\u53e3\u548clambda\u8868\u8fbe\u5f0f"}),"\n",(0,l.jsx)(n.h3,{id:"317-\u5e38\u91cf",children:"3.1.7 \u5e38\u91cf"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5728\u63a5\u53e3\u4e2d\u65e0\u6cd5\u62e5\u6709\u5b9e\u4f8b\u53d8\u91cf, \u63a5\u53e3\u5b9a\u4e49\u884c\u4e3a\u800c\u4e0d\u662f\u72b6\u6001."}),"\n",(0,l.jsx)(n.li,{children:"\u4e4b\u524d\u6240\u6709\u7684\u63a5\u53e3\u65b9\u6cd5\u5fc5\u987b\u662f\u62bd\u8c61\u7684(abstract), \u73b0\u5728\u53ef\u4ee5\u6dfb\u52a0\u4e24\u79cd\u6709\u5177\u4f53\u5b9e\u73b0\u7684\u65b9\u6cd5: \u9759\u6001\u65b9\u6cd5\u548c\u9ed8\u8ba4\u65b9\u6cd5."}),"\n",(0,l.jsxs)(n.li,{children:["\u5b9a\u4e49\u5728\u63a5\u53e3\u4e2d\u7684\u4efb\u4f55\u53d8\u91cf\u81ea\u52a8\u4e3a",(0,l.jsx)(n.code,{children:"public static final"}),"."]}),"\n",(0,l.jsx)(n.li,{children:"\u5de5\u5382\u65b9\u6cd5\u5728\u63a5\u53e3\u4e2d\u975e\u5e38\u6709\u610f\u4e49, \u8c03\u7528\u63a5\u53e3\u7684\u5de5\u5382\u65b9\u6cd5\u8fd4\u56de\u5b9e\u73b0\u63a5\u53e3\u7684\u5b9e\u4f8b, \u53ef\u4ee5\u8ba9\u8c03\u7528\u8005\u65e0\u9700\u5173\u5fc3\u5b83\u662f\u54ea\u4e2a\u7c7b."}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"372-\u8bbf\u95ee\u6765\u81ea\u95ed\u5408\u4f5c\u7528\u57df\u7684\u53d8\u91cf",children:"3.7.2 \u8bbf\u95ee\u6765\u81ea\u95ed\u5408\u4f5c\u7528\u57df\u7684\u53d8\u91cf"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'int index = 0;\nList<String> names = Arrays.asList("Alan", "Wei");\nConsumer<String> lambda = name -> {\n    //index \u662f\u81ea\u7531\u53d8\u91cf\n    System.out.println(name.toLowerCase());\n};\nnames.stream().forEach(lambda);\n'})}),"\n",(0,l.jsx)(n.p,{children:"lambda\u8868\u8fbe\u5f0f\u6709\u4e09\u4e2a\u90e8\u5206:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"\u4ee3\u7801\u5757"}),"\n",(0,l.jsxs)(n.li,{children:["\u53c2\u6570(",(0,l.jsx)(n.code,{children:"name"})," \u662f\u53c2\u6570)"]}),"\n",(0,l.jsx)(n.li,{children:"\u81ea\u7531\u53d8\u91cf\u7684\u503c(\u65e2\u4e0d\u662f\u53c2\u6570\u53d8\u91cf, \u4e5f\u4e0d\u662f\u4ee3\u7801\u5185\u90e8\u5b9a\u4e49\u7684\u53d8\u91cf, \u5bf9\u4e8elambda\u8868\u8fbe\u5f0f, index\u5c31\u662f\u81ea\u7531\u53d8\u91cf.)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\u63cf\u8ff0\u5e26\u6709\u81ea\u7531\u53d8\u91cf\u503c\u7684\u6280\u672f\u540d\u8bcd\u662f\u95ed\u5305."}),"\n",(0,l.jsxs)(n.p,{children:["\u5728",(0,l.jsx)(n.code,{children:"lambda"}),"\u7684\u4ee3\u7801\u5757\u4e2d\u65e0\u6cd5\u4fee\u6539index\u7684\u503c:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"int index = 0;\nConsumer<String> lambda = name -> {\n\tindex++; //\u65e0\u6cd5\u7f16\u8bd1\n};\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u957f\u5ea6\u4e3a1\u7684\u6570\u7ec4\u7ed5\u8fc7\u8fd9\u4e2a\u9650\u5236:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"int[] index = new int[1];\nConsumer<String> lambda = name -> {\n\tindex[0]++;\n};\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>c});var a=i(96540);const l={},s=a.createContext(l);function r(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);