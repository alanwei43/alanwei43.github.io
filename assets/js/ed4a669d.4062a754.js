"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[60586],{5922:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"collections/git","title":"\u5e38\u7528Git\u547d\u4ee4","description":"\u5e38\u7528\u6280\u5de7","source":"@site/src/docs/built-in/collections/git.md","sourceDirName":"collections","slug":"/collections/git","permalink":"/docs/built-in/collections/git","draft":false,"unlisted":false,"editUrl":"https://github.com/alanwei43/blog/tree/master/src/docs/built-in/collections/git.md","tags":[{"inline":true,"label":"git","permalink":"/docs/built-in/tags/git"}],"version":"current","frontMatter":{"title":"\u5e38\u7528Git\u547d\u4ee4","sidebar_label":"Git","tags":["git"]},"sidebar":"tutorialSidebar","previous":{"title":"Docker","permalink":"/docs/built-in/collections/docker"},"next":{"title":"Linux/macOS/Windows\xa0\u5e38\u7528\u547d\u4ee4","permalink":"/docs/built-in/collections/os-scripts"}}');var c=i(74848),s=i(28453);const l={title:"\u5e38\u7528Git\u547d\u4ee4",sidebar_label:"Git",tags:["git"]},r=void 0,d={},a=[{value:"\u5e38\u7528\u6280\u5de7",id:"\u5e38\u7528\u6280\u5de7",level:2},{value:"\u514b\u9686\u6307\u5b9a\u5206\u652f",id:"\u514b\u9686\u6307\u5b9a\u5206\u652f",level:3},{value:"\u67e5\u770b\u6587\u4ef6\u533a\u522b",id:"\u67e5\u770b\u6587\u4ef6\u533a\u522b",level:3},{value:"\u7f13\u5b58\u8ba4\u8bc1\u6570\u636e",id:"\u7f13\u5b58\u8ba4\u8bc1\u6570\u636e",level:3},{value:"\u914d\u7f6e\u7f16\u8f91\u5668",id:"\u914d\u7f6e\u7f16\u8f91\u5668",level:3},{value:"\u6807\u7b7e",id:"\u6807\u7b7e",level:3},{value:"\u5220\u9664\u5206\u652f",id:"\u5220\u9664\u5206\u652f",level:3},{value:"\u53d6\u6d88 git reset \u64cd\u4f5c",id:"\u53d6\u6d88-git-reset-\u64cd\u4f5c",level:3},{value:"\u63a8\u9001\u672c\u5730\u5206\u652f",id:"\u63a8\u9001\u672c\u5730\u5206\u652f",level:3},{value:"create a new repository on the command line",id:"create-a-new-repository-on-the-command-line",level:3},{value:"push an existing repository from the command line",id:"push-an-existing-repository-from-the-command-line",level:3},{value:"patch and apply",id:"patch-and-apply",level:3}];function o(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.h2,{id:"\u5e38\u7528\u6280\u5de7",children:"\u5e38\u7528\u6280\u5de7"}),"\n",(0,c.jsx)(n.h3,{id:"\u514b\u9686\u6307\u5b9a\u5206\u652f",children:"\u514b\u9686\u6307\u5b9a\u5206\u652f"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.a,{href:"https://stackoverflow.com/questions/1778088/how-do-i-clone-a-single-branch-in-git",children:"How do I clone a single branch in Git?"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"# clone only the remote primary HEAD (default: origin/master)\ngit clone <url> --single-branch\n\n# as in:\ngit clone <url> --branch <branch> --single-branch [<folder>]\n"})}),"\n",(0,c.jsx)(n.h3,{id:"\u67e5\u770b\u6587\u4ef6\u533a\u522b",children:"\u67e5\u770b\u6587\u4ef6\u533a\u522b"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"git diff <previous_commit_hash>..<newer_commit_hash> -- {file_path}"})," \u7528\u4e8e\u67e5\u770b\u6307\u5b9a\u6587\u4ef6\u4e24\u4e2a\u4e0d\u540ccommit\u4e4b\u95f4\u7684\u533a\u522b, \u6bd4\u5982:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"git diff 9a422584b66686b11c20ce330aeb84f47e1c0b9b..e5f766ac6899f191a2fd53c9247f1ee9264886e0 -- src/some_file.js \n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.a,{href:"https://stackoverflow.com/questions/3368590/show-diff-between-commits",children:"\u539f\u6587 - Show diff between commits"})}),"\n",(0,c.jsx)(n.p,{children:"Try"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"git diff k73ud^..dj374\n"})}),"\n",(0,c.jsx)(n.p,{children:"to make sure to include all changes of k73ud in the resulting diff."}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"git diff"})," compares two endpoints (",(0,c.jsx)(n.a,{href:"https://stackoverflow.com/a/7256391/6309",children:"instead of a commit range"}),"). Since the OP want to see the changes introduced by ",(0,c.jsx)(n.code,{children:"k73ud"}),", he/she needs to difference between ",(0,c.jsx)(n.a,{href:"https://stackoverflow.com/a/1956054/6309",children:"the first parent commit of k73ud:  k73ud^"})," (or ",(0,c.jsx)(n.a,{href:"https://stackoverflow.com/a/2222920/6309",children:"k73ud^1 or k73ud~"})," )."]}),"\n",(0,c.jsx)(n.p,{children:"That way, the diff results will include changes since k73ud parent (meaning including changes from k73ud itself), instead of changes introduced since k73ud (up to dj374)."}),"\n",(0,c.jsx)(n.p,{children:"Also you can try:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"git diff oldCommit..newCommit\ngit diff k73ud..dj374 \n"})}),"\n",(0,c.jsx)(n.p,{children:"and (1 space, not more):"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"git diff oldCommit newCommit\ngit diff k73ud dj374\n"})}),"\n",(0,c.jsx)(n.p,{children:"And if you need to get only files names (e.g. to copy hotfix them manually):"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"git diff k73ud dj374 --name-only\n"})}),"\n",(0,c.jsx)(n.p,{children:"And you can get changes applied to another branch:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"git diff k73ud dj374 > my.patch\ngit apply my.patch\n"})}),"\n",(0,c.jsx)(n.h3,{id:"\u7f13\u5b58\u8ba4\u8bc1\u6570\u636e",children:"\u7f13\u5b58\u8ba4\u8bc1\u6570\u636e"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"git config --global credential.helper cache # \u8bbe\u7f6ecredential\u5b58\u50a8\u5728\u5185\u5b58\u4e2d, \u9ed8\u8ba4\u662f \u201c900\u201d\uff0c\u4e5f\u5c31\u662f 15 \u5206\u949f\ngit config --global credential.helper store --file ~/.my-credentials # \u8bbe\u7f6ecredential\u5b58\u50a8\u5728\u6307\u5b9a\u6587\u4ef6\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u914d\u7f6e\u6587\u4ef6\u65b9\u5f0f, \u8bbe\u7f6ecredential\u5b58\u50a8\u5728\u5185\u5b58\u4e2d, \u5e76\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-config",children:"[credential]\n  helper = cache --timeout 3600\n"})}),"\n",(0,c.jsx)(n.h3,{id:"\u914d\u7f6e\u7f16\u8f91\u5668",children:"\u914d\u7f6e\u7f16\u8f91\u5668"}),"\n",(0,c.jsx)(n.p,{children:"\u4f7f\u7528\u4ee5\u4e0b\u65b9\u5f0f\u6307\u5b9a\u9ed8\u8ba4\u7f16\u8f91\u5668\u4e3a vim:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'git config --global core.editor "vim"\nexport GIT_EDITOR=vim\n'})}),"\n",(0,c.jsx)(n.p,{children:"\u6216\u8005\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\u4f7f\u7528 sublime \u4f5c\u4e3a\u9ed8\u8ba4\u7f16\u8f91\u5668:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-config",metastring:'title="~/.gitconfig"',children:"[core]\n    editor = 'subl' --wait\n"})}),"\n",(0,c.jsx)(n.admonition,{type:"note",children:(0,c.jsxs)(n.p,{children:["\u6ce8\u610f\u8981\u52a0\u4e0a ",(0,c.jsx)(n.code,{children:"--wait"})]})}),"\n",(0,c.jsxs)(n.p,{children:["\u5176\u4ed6",(0,c.jsx)(n.a,{href:"https://www.atlassian.com/git/tutorials/setting-up-a-repository/git-config",children:"\u7f16\u8f91\u5668\u914d\u7f6e"}),"\u5982\u4e0b:"]}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Editor"}),(0,c.jsx)(n.th,{children:"Config command"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Atom"}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:'git config --global core.editor "atom --wait"'})})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"emacs"}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:'git config --global core.editor "emacs"'})})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"nano"}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:'git config --global core.editor "nano -w"'})})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"vim"}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:'git config --global core.editor "vim"'})})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Sublime Text (Mac/Linux)"}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:'git config --global core.editor "subl -n -w"'})})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Sublime Text (Win, 32-bit install)"}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"git config --global core.editor \"'c:/program files (x86)/sublime text 3/sublimetext.exe' -w\""})})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Sublime Text (Win, 64-bit install)"}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"git config --global core.editor \"'c:/program files/sublime text 3/sublimetext.exe' -w\""})})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Textmate"}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:'git config --global core.editor "mate -w"'})})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Visual Studio Code"}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:'git config --global core.editor "code --wait"'})})]})]})]}),"\n",(0,c.jsx)(n.h3,{id:"\u6807\u7b7e",children:"\u6807\u7b7e"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'# ref: https://stackoverflow.com/questions/3404936/show-which-git-tag-you-are-on\n# \u663e\u793a\u5f53\u524d\u7684\u6807\u7b7e \ngit describe --tags\n\n# ref https://stackoverflow.com/questions/35979642/how-to-checkout-remote-git-tag\n# \u83b7\u53d6\u6240\u6709\u7684tag\ngit fetch --all --tags --prune\n\n# \u5207\u6362\u6807\u7b7e\ngit checkout tags/<tag_name> -b <branch_name>\n\n# list all tags\ngit tag\n\n# create tag\ngit tag -a v1.0 -m "Product release"\n\n# delete tag\ngit tag -d <tag_name>\n'})}),"\n",(0,c.jsx)(n.h3,{id:"\u5220\u9664\u5206\u652f",children:"\u5220\u9664\u5206\u652f"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"git branch -d feature/login # \u5220\u9664\u672c\u5730\u5206\u652f\ngit push origin --delete feature/login # \u5220\u9664\u8fdc\u7a0b\u5206\u652f\n"})}),"\n",(0,c.jsx)(n.h3,{id:"\u53d6\u6d88-git-reset-\u64cd\u4f5c",children:"\u53d6\u6d88 git reset \u64cd\u4f5c"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"git reset 'HEAD@{1}'\n"})}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsxs)(n.p,{children:["\u6765\u6e90 ",(0,c.jsx)(n.a,{href:"https://stackoverflow.com/questions/2510276/how-to-undo-git-reset",children:"How to undo 'git reset'?"})]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"\u63a8\u9001\u672c\u5730\u5206\u652f",children:"\u63a8\u9001\u672c\u5730\u5206\u652f"}),"\n",(0,c.jsx)(n.p,{children:"\u5c06\u672c\u5730\u7684\u5206\u652f\u63a8\u9001\u5230\u8fdc\u7a0b\u7684\u65b0\u5206\u652f\u4e0a(\u8fdc\u7a0b\u7684\u65b0\u5206\u652f\u4e0d\u5b58\u5728):"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"git push origin local_branch_name:remote_branch_name\n"})}),"\n",(0,c.jsx)(n.h3,{id:"create-a-new-repository-on-the-command-line",children:"create a new repository on the command line"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-sh",children:'echo "# server-deploy" >> README.md\ngit init\ngit add README.md\ngit commit -m "first commit"\ngit branch -M master\ngit remote add origin git@github.com:username/project-name.git\ngit push -u origin master\n'})}),"\n",(0,c.jsx)(n.h3,{id:"push-an-existing-repository-from-the-command-line",children:"push an existing repository from the command line"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-sh",children:"git remote add origin git@github.com:username/project-name.git\ngit branch -M master\ngit push -u origin master\n"})}),"\n",(0,c.jsx)(n.h3,{id:"patch-and-apply",children:"patch and apply"}),"\n",(0,c.jsx)(n.p,{children:"\u5c06\u672c\u5730\u53d8\u66f4\u4fdd\u5b58\u6210 patch \u6587\u4ef6\uff0c\u7136\u540e\u5728\u53e6\u5916\u7684\u5730\u65b9\u5e94\u7528\u53d8\u66f4"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:"# \u5c06\u672c\u5730\u53d8\u66f4\u4fdd\u5b58\u6210 patch\ngit add --all # \u8fd9\u91cc\u6839\u636e\u9700\u6c42\u6682\u5b58\u6587\u4ef6\ngit diff --cached --binary > staged_changes.patch # \u8fd9\u4e2a\u547d\u4ee4\u53ea\u4f1a\u5c06\u6682\u5b58\u7684\u4fee\u6539\u4fdd\u5b58\u5230 patch \u6587\u4ef6\n\n# \u5728\u53e6\u5916\u4e00\u4e2a\u5de5\u4f5c\u76ee\u5f55\u6267\u884c\u4e0b\u9762\u547d\u4ee4\u5e94\u7528\u4fee\u6539\ngit apply staged_changes.patch\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(o,{...e})}):o(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>r});var t=i(96540);const c={},s=t.createContext(c);function l(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);