"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[85179],{26470:e=>{e.exports=JSON.parse('{"permalink":"/blog/2021/04/02/docker-timezone","editUrl":"https://github.com/alanwei43/blog/tree/master/src/blog/2021/04/02-docker-timezone.md","source":"@site/src/blog/2021/04/02-docker-timezone.md","title":"Docker\u65f6\u533a\u8bbe\u7f6e","description":"\u8bbe\u7f6e\u5e38\u7528Docker\u955c\u50cf\u7684\u5bb9\u5668\u65f6\u533a","date":"2021-04-02T00:00:00.000Z","tags":[{"inline":true,"label":"docker","permalink":"/blog/tags/docker"},{"inline":true,"label":"timezone","permalink":"/blog/tags/timezone"}],"readingTime":1.25,"hasTruncateMarker":true,"authors":[{"name":"\u4e0d\u624d\u8001\u9ec4","title":"\u804a\u804a\u81ea\u5df1\u4ec5\u6709\u7684\u4e00\u70b9\u70b9\u76ae\u6bdb","url":"https://mp.weixin.qq.com/s/uO0nqNnWMqeQU8EyQYhllQ","imageURL":"https://wx.qlogo.cn/mmhead/Q3auHgzwzM6WLAgHjMMp4a0MQq4icawPiatftePLlibsfHLdad0eauNIA/0","key":null,"page":null}],"frontMatter":{"title":"Docker\u65f6\u533a\u8bbe\u7f6e","author":"\u4e0d\u624d\u8001\u9ec4","author_title":"\u804a\u804a\u81ea\u5df1\u4ec5\u6709\u7684\u4e00\u70b9\u70b9\u76ae\u6bdb","author_url":"https://mp.weixin.qq.com/s/uO0nqNnWMqeQU8EyQYhllQ","author_image_url":"https://wx.qlogo.cn/mmhead/Q3auHgzwzM6WLAgHjMMp4a0MQq4icawPiatftePLlibsfHLdad0eauNIA/0","tags":["docker","timezone"],"description":"\u8bbe\u7f6e\u5e38\u7528Docker\u955c\u50cf\u7684\u5bb9\u5668\u65f6\u533a","draft":false,"hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"\u6dfb\u52a0Windows\u5f00\u542f\u542f\u52a8\u7a0b\u5e8f","permalink":"/blog/2021/04/03/windows-add-programs-to-startup-folder"},"nextItem":{"title":"\u89e3\u51b3 NPM \u5b89\u88c5\u5e94\u7528\u51fa\u73b0 ERESOLVE \u9519\u8bef","permalink":"/blog/2021/03/30/npm-install-eresulve-error"}}')},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>o});var i=t(96540);const a={},r=i.createContext(a);function l(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),i.createElement(r.Provider,{value:n},e.children)}},53593:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>c});var i=t(26470),a=t(74848),r=t(28453);const l={title:"Docker\u65f6\u533a\u8bbe\u7f6e",author:"\u4e0d\u624d\u8001\u9ec4",author_title:"\u804a\u804a\u81ea\u5df1\u4ec5\u6709\u7684\u4e00\u70b9\u70b9\u76ae\u6bdb",author_url:"https://mp.weixin.qq.com/s/uO0nqNnWMqeQU8EyQYhllQ",author_image_url:"https://wx.qlogo.cn/mmhead/Q3auHgzwzM6WLAgHjMMp4a0MQq4icawPiatftePLlibsfHLdad0eauNIA/0",tags:["docker","timezone"],description:"\u8bbe\u7f6e\u5e38\u7528Docker\u955c\u50cf\u7684\u5bb9\u5668\u65f6\u533a",draft:!1,hide_table_of_contents:!1},o=void 0,s={authorsImageUrls:[void 0]},c=[{value:"CentOS, Deian",id:"centos-deian",level:2},{value:"Alpine, Ubuntu",id:"alpine-ubuntu",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"\u4e0b\u9762\u4ecb\u7ecd\u51e0\u4e2a\u5e38\u7528\u57fa\u7840\u955c\u50cf(Alpine\uff0cUbuntu\uff0cDebian \u548c CentOS)\u5982\u4f55\u8bbe\u7f6e\u65f6\u533a\u3002"}),"\n",(0,a.jsx)(n.h2,{id:"centos-deian",children:"CentOS, Deian"}),"\n",(0,a.jsxs)(n.p,{children:["CentOS \u548c Deian \u5185\u7f6e\u4e86\u65f6\u533a\u6570\u636e\u5e93 tzdata (\u65f6\u533a\u6570\u636e\u4f4d\u4e8e ",(0,a.jsx)(n.code,{children:"/usr/share/timezone"}),")\uff0c\u652f\u6301\u76f4\u63a5\u901a\u8fc7\u73af\u5883\u53d8\u91cf(",(0,a.jsx)(n.code,{children:"-e TZ=Asia/Shanghai"}),")\u8bbe\u7f6e\u5bb9\u5668\u65f6\u533a:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker run -e TZ=Asia/Shanghai --rm -it centos:8 date\ndocker run -e TZ=Asia/Shanghai --rm -it debian:9.13 date\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u6216\u8005\u901a\u8fc7",(0,a.jsx)(n.code,{children:"Dockerfile"}),"\u81ea\u5b9a\u73af\u5883\u53d8\u91cf:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-dockerfile",metastring:'title="Dockerfile"',children:"FROM debian:9.13\n\nENV TZ=Asia/Shanghai\n\n# \u5176\u4ed6\u6307\u4ee4...\n"})}),"\n",(0,a.jsx)(n.h2,{id:"alpine-ubuntu",children:"Alpine, Ubuntu"}),"\n",(0,a.jsxs)(n.p,{children:["alpine \u548c Ubuntu \u9700\u8981\u5b89\u88c5\u65f6\u533a\u6570\u636e\u4e4b\u540e\u6307\u5b9a\u65f6\u533a, \u4ee5\u4e0b\u4ee5 ",(0,a.jsx)(n.a,{href:"https://wiki.alpinelinux.org/wiki/Setting_the_timezone",children:"alpine \u4e3a\u4f8b\u4ecb\u7ecd"}),":"]}),"\n",(0,a.jsx)(n.p,{children:"\u5199\u4e00\u4e2a Dockerfile:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-dockerfile",metastring:'title="Dockerfile.alpine"',children:"FROM alpine:3.13\n\n# \u6dfb\u52a0\u963f\u91cc\u4e91\u955c\u50cf, \u52a0\u5feb\u5305\u5b89\u88c5\u901f\u5ea6\nRUN sed -i 's/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g' /etc/apk/repositories\n# \u5f00\u59cb\u5b89\u88c5\u65f6\u533a\u6570\u636e\nRUN apk add tzdata\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u7136\u540e\u5f00\u59cb\u6784\u5efa: ",(0,a.jsx)(n.code,{children:"docker build -t alpine:3.13-tz -f Dockerfile.alpine ."})]}),"\n",(0,a.jsxs)(n.p,{children:["\u73b0\u5728\u5c31\u53ef\u4ee5\u4f7f\u7528\u521a\u624d\u6784\u5efa\u7684\u955c\u50cf",(0,a.jsx)(n.code,{children:"alpine:3.13-tz"}),", \u6307\u5b9a\u5bb9\u5668\u65f6\u533a\u4e86:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker run -e TZ=Asia/Shanghai --rm -it alpine:3.13-tz date # \u8f93\u51fa\u5bb9\u5668\u65f6\u95f4\ndocker run -e TZ=Asia/Shanghai --rm -it alpine:3.13-tz ls /usr/share/zoneinfo # \u8f93\u51fa\u65f6\u533a\u4fe1\u606f\n"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://mp.weixin.qq.com/s/uO0nqNnWMqeQU8EyQYhllQ",children:"\u5f15\u7528 \u804a\u4e00\u804aDocker\u4e0e\u65f6\u533a"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);