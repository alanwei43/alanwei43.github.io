"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[93519],{28453:(e,r,t)=>{t.d(r,{R:()=>i,x:()=>o});var n=t(96540);const a={},s=n.createContext(a);function i(e){const r=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),n.createElement(s.Provider,{value:r},e.children)}},40026:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>n,toc:()=>l});var n=t(43679),a=t(74848),s=t(28453);const i={title:"\u5220\u9664HTTP\u8bf7\u6c42\u5934\u4e2d\u7684 referrer",author:"Alan",author_title:"Maintainer of blog",author_url:"https://github.com/alanwei43",author_image_url:"https://avatars.githubusercontent.com/u/2927578?s=460&u=153132e7aa3be8295a1703af9b759ca22338f557&v=4",tags:["http","web"],draft:!1,hide_table_of_contents:!1},o=void 0,c={authorsImageUrls:[void 0]},l=[];function h(e){const r={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.p,{children:["\u5220\u9664HTTP\u8bf7\u6c42\u5934\u4e2d\u7684 ",(0,a.jsx)(r.code,{children:"Referer"}),"\uff0c\u80fd\u89e3\u51b3\u90e8\u5206\u9632\u76d7\u94fe\u95ee\u9898\u3002"]}),"\n",(0,a.jsxs)(r.p,{children:["\u5728\u9875\u9762\u7684 ",(0,a.jsx)(r.code,{children:"head"})," \u91cc\u6dfb\u52a0\u4ee5\u4e0b\u4ee3\u7801\u5373\u53ef\u5220\u9664",(0,a.jsx)(r.code,{children:"Referer"}),"\u8bf7\u6c42\u5934\uff1a"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-html",children:'<meta name="referrer" content="no-referrer" />\n'})}),"\n",(0,a.jsx)(r.p,{children:"\u8fd9\u5bf9\u9875\u9762\u4e0a\u7684\u94fe\u63a5\u8bf7\u6c42\u4ee5\u53ca\u4f7f\u7528JavaScript\u4ee3\u7801\u53d1\u8d77\u7684Ajax\u8bf7\u6c42\u90fd\u6709\u6548\u3002"}),"\n",(0,a.jsx)(r.p,{children:"\u6216\u8005\u9488\u5bf9\u56fe\u7247\u53bb\u6389referrer:"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-html",children:'<img referrerpolicy="no-referrer|origin|unsafe-url" src="image link"/>\n\n\x3c!-- \u6bd4\u5982 --\x3e\n<img referrerpolicy="no-referrer" src="https://gitee.com/alanway/resources/raw/master/files/iis-reverse-proxy/site-access-with-proxy.png" />\n'})}),"\n",(0,a.jsxs)(r.blockquote,{children:["\n",(0,a.jsxs)(r.p,{children:["\u53c2\u8003\u6587\u6863 ",(0,a.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/referrerPolicy",children:"HTMLImageElement: referrerPolicy property"})]}),"\n"]}),"\n",(0,a.jsxs)(r.p,{children:["\u5176\u4ed6\u6709\u6548 ",(0,a.jsx)(r.code,{children:"meta"})," \u9009\u9879\u5982\u4e0b:"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-html",children:'<meta name="referrer" content="unsafe-url" />\n<meta name="referrer" content="origin" />\n<meta name="referrer" content="no-referrer-when-downgrade" />\n<meta name="referrer" content="origin-when-cross-origin" />\n'})}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["See if it works for your browser here: ",(0,a.jsx)(r.a,{href:"http://caniuse.com/#feat=referrer-policy",children:"http://caniuse.com/#feat=referrer-policy"})]}),"\n",(0,a.jsxs)(r.li,{children:["See specs here: ",(0,a.jsx)(r.a,{href:"http://w3c.github.io/webappsec/specs/referrer-policy/",children:"http://w3c.github.io/webappsec/specs/referrer-policy/"})]}),"\n"]}),"\n",(0,a.jsxs)(r.p,{children:["Also note that browsers now send the Origin header (with CORS requests and POST requests, see here: ",(0,a.jsx)(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Origin",children:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Origin"})," ) which includes domain and port, and, as far as I know, cannot be removed. If you use ",(0,a.jsx)(r.code,{children:'<meta name="referrer" content="origin" />'})," the referrer will contain similar information to the Origin header, which is already good from a privacy point of view, since it will hide the exact page the user is in."]}),"\n",(0,a.jsx)(r.p,{children:(0,a.jsx)(r.strong,{children:"Update:"})}),"\n",(0,a.jsxs)(r.p,{children:["If you want to remove the referrer by using JavaScript only, you may add the appropriate meta tag dynamically just before making the Ajax request. This JavaScript will add ",(0,a.jsx)(r.code,{children:'<meta name="referrer" content="no-referrer" /> '}),"to head section of the web page:"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-javascript",children:"var meta = document.createElement('meta');\nmeta.name = \"referrer\";\nmeta.content = \"no-referrer\";\ndocument.getElementsByTagName('head')[0].appendChild(meta);\n"})}),"\n",(0,a.jsxs)(r.blockquote,{children:["\n",(0,a.jsx)(r.p,{children:(0,a.jsx)(r.a,{href:"https://stackoverflow.com/questions/6817595/remove-http-referer",children:"\u539f\u6587 - Remove http referer"})}),"\n"]}),"\n",(0,a.jsxs)(r.admonition,{type:"info",children:[(0,a.jsxs)(r.p,{children:["\u9664\u4e86\u6307\u5b9a ",(0,a.jsx)(r.code,{children:"referrerPolicy"})," \u7b56\u7565\u7684\u5f62\u5f0f\u53bb\u6389\u8bf7\u6c42\u5934\u91cc\u7684 ",(0,a.jsx)(r.code,{children:"referrer"})," \u7684\u65b9\u5f0f, \u8fd8\u53ef\u4ee5\u501f\u52a9\u7b2c\u4e09\u65b9\u4e2d\u8f6c\u670d\u52a1:"]}),(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:["WordPress\uff1a ",(0,a.jsx)(r.code,{children:"https://i0.wp.com/\u56fe\u7247\u5730\u57401"})," \uff08\u56fe\u7247\u5730\u5740\u8981\u6389 https://\uff09"]}),"\n",(0,a.jsxs)(r.li,{children:["Weserv.nl\uff1a ",(0,a.jsx)(r.code,{children:"https://images.weserv.nl/?url=\u56fe\u7247\u5730\u5740"})]}),"\n",(0,a.jsxs)(r.li,{children:["\u767e\u5ea6 1\uff1a ",(0,a.jsx)(r.code,{children:"https://image.baidu.com/search/down?url=\u56fe\u7247\u5730\u5740"})]}),"\n",(0,a.jsxs)(r.li,{children:["\u767e\u5ea6 2\uff1a ",(0,a.jsx)(r.code,{children:"https://gimg2.baidu.com/image_search/&app=2020&src=\u56fe\u7247\u5730\u5740"})," \uff08\u56fe\u7247\u5730\u5740\u8981\u53bb\u6389 https://\uff09"]}),"\n"]}),(0,a.jsx)(r.p,{children:"\u6bd4\u5982:"}),(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-html",children:'<img referrerpolicy="no-referrer" src="https://image.baidu.com/search/down?url=https%3A%2F%2Fwx1.sinaimg.cn%2Forj360%2F00826I3Dly1hiqkbbep7jj30vh1w5h0b.jpg"  />\n'})})]})]})}function d(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},43679:e=>{e.exports=JSON.parse('{"permalink":"/blog/2021/03/09/remove-http-request-referrer","editUrl":"https://github.com/alanwei43/blog/tree/master/src/blog/2021/03/09-remove-http-request-referrer.md","source":"@site/src/blog/2021/03/09-remove-http-request-referrer.md","title":"\u5220\u9664HTTP\u8bf7\u6c42\u5934\u4e2d\u7684 referrer","description":"\u5220\u9664HTTP\u8bf7\u6c42\u5934\u4e2d\u7684 Referer\uff0c\u80fd\u89e3\u51b3\u90e8\u5206\u9632\u76d7\u94fe\u95ee\u9898\u3002","date":"2021-03-09T00:00:00.000Z","tags":[{"inline":true,"label":"http","permalink":"/blog/tags/http"},{"inline":true,"label":"web","permalink":"/blog/tags/web"}],"readingTime":1.825,"hasTruncateMarker":true,"authors":[{"name":"Alan","title":"Maintainer of blog","url":"https://github.com/alanwei43","imageURL":"https://avatars.githubusercontent.com/u/2927578?s=460&u=153132e7aa3be8295a1703af9b759ca22338f557&v=4","key":null,"page":null}],"frontMatter":{"title":"\u5220\u9664HTTP\u8bf7\u6c42\u5934\u4e2d\u7684 referrer","author":"Alan","author_title":"Maintainer of blog","author_url":"https://github.com/alanwei43","author_image_url":"https://avatars.githubusercontent.com/u/2927578?s=460&u=153132e7aa3be8295a1703af9b759ca22338f557&v=4","tags":["http","web"],"draft":false,"hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"macOS - \u66f4\u6539\u529f\u80fd\u952e\u7684\u9ed8\u8ba4\u884c\u4e3a","permalink":"/blog/2021/03/13/macos-change-default-behavior-function-keys"},"nextItem":{"title":"\u60b2\u50ac\u7684\u7a0b\u5e8f\u5458\uff0c\u4ee5\u53ca\u7a0b\u5e8f\u5458\u7684\u60b2\u50ac","permalink":"/blog/2021/03/07/bei-cui-cheng-xu-yuan-yi-ji-cheng-xu-yuan-be-cui"}}')}}]);