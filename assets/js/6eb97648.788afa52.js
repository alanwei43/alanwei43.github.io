"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[60448],{28453:(e,t,n)=>{n.d(t,{R:()=>c,x:()=>a});var r=n(96540);const s={},i=r.createContext(s);function c(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(i.Provider,{value:t},e.children)}},68724:e=>{e.exports=JSON.parse('{"permalink":"/blog/2021/04/11/ubuntu-install-root-ca-certificate","editUrl":"https://github.com/alanwei43/blog/tree/master/src/blog/2021/04/11-ubuntu-install-root-ca-certificate.md","source":"@site/src/blog/2021/04/11-ubuntu-install-root-ca-certificate.md","title":"Ubuntu \u7cfb\u7edf\u5b89\u88c5\u6839\u8bc1\u4e66","description":"Ubuntu \u7cfb\u7edf\u5b89\u88c5\u6839\u8bc1\u4e66","date":"2021-04-11T00:00:00.000Z","tags":[{"inline":true,"label":"linux","permalink":"/blog/tags/linux"},{"inline":true,"label":"ubuntu","permalink":"/blog/tags/ubuntu"}],"readingTime":1.625,"hasTruncateMarker":true,"authors":[{"name":"Alan","title":"Maintainer of blog","url":"https://github.com/alanwei43","imageURL":"https://avatars.githubusercontent.com/u/2927578?s=460&u=153132e7aa3be8295a1703af9b759ca22338f557&v=4","key":null,"page":null}],"frontMatter":{"title":"Ubuntu \u7cfb\u7edf\u5b89\u88c5\u6839\u8bc1\u4e66","author":"Alan","author_title":"Maintainer of blog","author_url":"https://github.com/alanwei43","author_image_url":"https://avatars.githubusercontent.com/u/2927578?s=460&u=153132e7aa3be8295a1703af9b759ca22338f557&v=4","tags":["linux","ubuntu"],"description":"Ubuntu \u7cfb\u7edf\u5b89\u88c5\u6839\u8bc1\u4e66","draft":false,"hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"Windows \u4e0a\u7684TCP\u4ee3\u7406\u8bbe\u7f6e","permalink":"/blog/2021/04/11/tcp-proxy-in-windows"},"nextItem":{"title":"Ubuntu\u65b0\u7cfb\u7edf\u5b89\u88c5\u811a\u672c","permalink":"/blog/2021/04/11/ubuntu-starter-scripts"}}')},95376:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>c,metadata:()=>r,toc:()=>o});var r=n(68724),s=n(74848),i=n(28453);const c={title:"Ubuntu \u7cfb\u7edf\u5b89\u88c5\u6839\u8bc1\u4e66",author:"Alan",author_title:"Maintainer of blog",author_url:"https://github.com/alanwei43",author_image_url:"https://avatars.githubusercontent.com/u/2927578?s=460&u=153132e7aa3be8295a1703af9b759ca22338f557&v=4",tags:["linux","ubuntu"],description:"Ubuntu \u7cfb\u7edf\u5b89\u88c5\u6839\u8bc1\u4e66",draft:!1,hide_table_of_contents:!1},a=void 0,l={authorsImageUrls:[void 0]},o=[];function u(e){const t={a:"a",code:"code",em:"em",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:["\u539f\u6587\u6765\u81ea: ",(0,s.jsx)(t.a,{href:"https://www.sonicwall.com/support/knowledge-base/how-to-add-dpi-ssl-ca-certificate-on-ubuntu-os/171225202320465/",children:"How To Add DPI-SSL CA Certificate On Ubuntu OS?"})]}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\u4e0b\u8f7d\u8bc1\u4e66\u5230\u672c\u5730, \u5982\u679c\u8bc1\u4e66\u662f ",(0,s.jsx)(t.code,{children:".cer"})," \u683c\u5f0f, \u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8f6c\u6210 ",(0,s.jsx)(t.code,{children:".crt"})," \u683c\u5f0f:"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"$ openssl x509 \u2013inform DER -in rootCA.cer \u2013out rootCA.crt\n"})}),"\n",(0,s.jsxs)(t.ol,{start:"2",children:["\n",(0,s.jsxs)(t.li,{children:["\u5728\u76ee\u5f55",(0,s.jsx)(t.code,{children:"/usr/share/ca-certificates"}),"\u4e0b\u521b\u5efa\u4efb\u610f\u540d\u79f0\u5b50\u76ee\u5f55(\u6bd4\u5982\u8fd9\u91cc\u4f7f\u7528",(0,s.jsx)(t.code,{children:"extra"}),"):"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"$ mkdir /usr/share/ca-certificates/extra\n"})}),"\n",(0,s.jsxs)(t.ol,{start:"3",children:["\n",(0,s.jsxs)(t.li,{children:["\u62f7\u8d1d\u6587\u4ef6\u5230 ",(0,s.jsx)(t.code,{children:"/usr/share/ca-certificates/extra"})," \u548c ",(0,s.jsx)(t.code,{children:"/usr/share/ca-certificate/mozilla"})]}),"\n",(0,s.jsxs)(t.li,{children:["\u4f7f\u7528\u547d\u4ee4",(0,s.jsx)(t.code,{children:"dpkg-reconfigure ca-certificates"}),", \u91cd\u65b0\u914d\u7f6e\u8bc1\u4e66:","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\u9009\u62e9 ",(0,s.jsx)(t.code,{children:"Yes"})]}),"\n",(0,s.jsxs)(t.li,{children:["\u6309\u7a7a\u683c\u9009\u4e2d\u521a\u624d\u65b0\u589e\u7684\u8bc1\u4e66: ",(0,s.jsx)(t.code,{children:"extra/rootCA.crt"})," \u548c ",(0,s.jsx)(t.code,{children:"mozilla/rootCA.crt"})]}),"\n",(0,s.jsxs)(t.li,{children:["\u6309 ",(0,s.jsx)(t.em,{children:"Tab"})," \u5207\u5230 ",(0,s.jsx)(t.code,{children:"Ok"}),"\u5e76\u786e\u8ba4"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\u6267\u884c\u547d\u4ee4 ",(0,s.jsx)(t.code,{children:"update-ca-certificates"})," \u66f4\u65b0CA\u8bc1\u4e66"]}),"\n",(0,s.jsxs)(t.li,{children:["\u68c0\u67e5\u6587\u4ef6 ",(0,s.jsx)(t.code,{children:"/etc/ca-certificates.conf"}),", \u786e\u4fdd\u521a\u624d\u65b0\u589e\u7684\u4e24\u6761\u8bb0\u5f55\u524d\u6ca1\u6709",(0,s.jsx)(t.code,{children:"!"}),"\u7b26\u53f7"]}),"\n",(0,s.jsx)(t.li,{children:"Firefox / Chrome \u5728Ubuntu\u7cfb\u7edf\u4e0a\u6709\u81ea\u5df1\u7684\u8bc1\u4e66\u6570\u636e\u5e93, \u9700\u8981\u624b\u52a8\u66f4\u65b0\u4e24\u4e2a\u6d4f\u89c8\u5668\u91cc\u7684\u8bc1\u4e66"}),"\n",(0,s.jsxs)(t.li,{children:["\u6253\u5f00Chrome\u6d4f\u89c8\u5668, \u8bbf\u95ee ",(0,s.jsx)(t.code,{children:"chrome://settings/certificates"}),", \u5207\u6362\u5230 ",(0,s.jsx)(t.code,{children:"Authorities"}),", \u7136\u540e\u9009\u62e9 ",(0,s.jsx)(t.strong,{children:"Import"})," \u5bfc\u5165 ",(0,s.jsx)(t.code,{children:"rootCA.crt"})," \u6587\u4ef6, \u91cd\u542f\u6d4f\u89c8\u5668\u5373\u53ef"]}),"\n",(0,s.jsxs)(t.li,{children:["\u6253\u5f00Firefox\u6d4f\u89c8\u5668, \u641c\u7d22 ",(0,s.jsx)(t.code,{children:"Certificate"}),", \u70b9\u51fb ",(0,s.jsx)(t.strong,{children:"View Certificate"}),", \u5207\u6362\u5230 ",(0,s.jsx)(t.code,{children:"Authorities"}),", \u70b9\u51fb ",(0,s.jsx)(t.strong,{children:"Import"})]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"\u6216\u8005\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u66f4\u65b0Chrome\u8bc1\u4e66\u6570\u636e\u5e93:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'certutil \u2013d sql:$HOME/.pki/nssdb \u2013A \u2013t "C,," \u2013n "Description Name" -i /usr/share/ca-certificates/extra/rootCA.crt\n'})}),"\n",(0,s.jsx)(t.p,{children:"\u9a8c\u8bc1\u8bc1\u4e66\u88ab\u6dfb\u52a0\u5230Chrome\u8bc1\u4e66\u6570\u636e\u5e93:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"$ certutil -L -d sql:${HOME}/.pki/nssdb\n"})}),"\n",(0,s.jsxs)(t.p,{children:["\u7136\u540e\u91cd\u542fChrome\u6d4f\u89c8\u5668, \u8bbf\u95ee ",(0,s.jsx)(t.code,{children:"chrome://settings/certificates"})," , \u5207\u6362\u5230 ",(0,s.jsx)(t.code,{children:"Authorities"})," Tab\u5373\u53ef\u770b\u5230\u65b0\u589e\u7684\u8bc1\u4e66."]})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);