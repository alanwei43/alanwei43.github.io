"use strict";(self.webpackChunkalan_blog=self.webpackChunkalan_blog||[]).push([[30137],{3905:(e,n,a)=>{a.d(n,{Zo:()=>u,kt:()=>g});var t=a(67294);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function i(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function o(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?i(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function l(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=t.createContext({}),c=function(e){var n=t.useContext(s),a=n;return e&&(a="function"==typeof e?e(n):o(o({},n),e)),a},u=function(e){var n=c(e.components);return t.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},d=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(a),g=r,m=d["".concat(s,".").concat(g)]||d[g]||p[g]||i;return a?t.createElement(m,o(o({ref:n},u),{},{components:a})):t.createElement(m,o({ref:n},u))}));function g(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=d;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=a[c];return t.createElement.apply(null,o)}return t.createElement.apply(null,a)}d.displayName="MDXCreateElement"},87914:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var t=a(87462),r=(a(67294),a(3905));const i={title:"\u5982\u4f55\u4f7f\u7528Maven\u521b\u5efa\u53ef\u6267\u884c\u7684JAR\u6587\u4ef6",author:"Alan",author_title:"Maintainer of blog",author_url:"https://github.com/alanwei43",author_image_url:"https://avatars.githubusercontent.com/u/2927578?s=460&u=153132e7aa3be8295a1703af9b759ca22338f557&v=4",tags:["java","maven"],draft:!1,hide_table_of_contents:!1},o=void 0,l={permalink:"/blog/2021/03/06/how-can-i-create-an-executable-jar-with-dependencies-using-maven",editUrl:"https://github.com/alanwei43/blog/tree/master/src/blog/2021-03-06-how-can-i-create-an-executable-jar-with-dependencies-using-maven.md",source:"@site/src/blog/2021-03-06-how-can-i-create-an-executable-jar-with-dependencies-using-maven.md",title:"\u5982\u4f55\u4f7f\u7528Maven\u521b\u5efa\u53ef\u6267\u884c\u7684JAR\u6587\u4ef6",description:"\u539f\u6587 - \u4f7f\u7528Maven\u6253\u5305\u53ef\u6267\u884cJAR\u7a0b\u5e8f",date:"2021-03-06T00:00:00.000Z",formattedDate:"March 6, 2021",tags:[{label:"java",permalink:"/blog/tags/java"},{label:"maven",permalink:"/blog/tags/maven"}],readingTime:1.3,hasTruncateMarker:!0,authors:[{name:"Alan",title:"Maintainer of blog",url:"https://github.com/alanwei43",imageURL:"https://avatars.githubusercontent.com/u/2927578?s=460&u=153132e7aa3be8295a1703af9b759ca22338f557&v=4"}],frontMatter:{title:"\u5982\u4f55\u4f7f\u7528Maven\u521b\u5efa\u53ef\u6267\u884c\u7684JAR\u6587\u4ef6",author:"Alan",author_title:"Maintainer of blog",author_url:"https://github.com/alanwei43",author_image_url:"https://avatars.githubusercontent.com/u/2927578?s=460&u=153132e7aa3be8295a1703af9b759ca22338f557&v=4",tags:["java","maven"],draft:!1,hide_table_of_contents:!1},prevItem:{title:"\u4f7f\u7528Maven\u521b\u5efa\u4e00\u4e2aJava\u9879\u76ee",permalink:"/blog/2021/03/06/create-java-project-use-maven"},nextItem:{title:"IKEv2 \u914d\u7f6e\u548c\u4f7f\u7528\u6307\u5357",permalink:"/blog/2021/03/06/ipsec-clients-ikev2"}},s={authorsImageUrls:[void 0]},c=[{value:"\u65b9\u6848 1",id:"\u65b9\u6848-1",level:2},{value:"\u65b9\u6848 2",id:"\u65b9\u6848-2",level:2},{value:"\u65b9\u6848 3",id:"\u65b9\u6848-3",level:2}],u={toc:c};function p(e){let{components:n,...a}=e;return(0,r.kt)("wrapper",(0,t.Z)({},u,a,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven"},"\u539f\u6587 - \u4f7f\u7528Maven\u6253\u5305\u53ef\u6267\u884cJAR\u7a0b\u5e8f")),(0,r.kt)("h2",{id:"\u65b9\u6848-1"},"\u65b9\u6848 1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<build>\n  <plugins>\n    <plugin>\n      <artifactId>maven-assembly-plugin</artifactId>\n      <configuration>\n        <archive>\n          <manifest>\n            <mainClass>fully.qualified.MainClass</mainClass>\n          </manifest>\n        </archive>\n        <descriptorRefs>\n          <descriptorRef>jar-with-dependencies</descriptorRef>\n        </descriptorRefs>\n      </configuration>\n    </plugin>\n  </plugins>\n</build>\n")),(0,r.kt)("p",null,"and you run it with"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mvn clean compile assembly:single\n")),(0,r.kt)("h2",{id:"\u65b9\u6848-2"},"\u65b9\u6848 2"),(0,r.kt)("p",null,"You can use the dependency-plugin to generate all dependencies in a separate directory before the package phase and then include that in the classpath of the manifest:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<plugin>\n    <groupId>org.apache.maven.plugins</groupId>\n    <artifactId>maven-dependency-plugin</artifactId>\n    <executions>\n        <execution>\n            <id>copy-dependencies</id>\n            <phase>prepare-package</phase>\n            <goals>\n                <goal>copy-dependencies</goal>\n            </goals>\n            <configuration>\n                <outputDirectory>${project.build.directory}/lib</outputDirectory>\n                <overWriteReleases>false</overWriteReleases>\n                <overWriteSnapshots>false</overWriteSnapshots>\n                <overWriteIfNewer>true</overWriteIfNewer>\n            </configuration>\n        </execution>\n    </executions>\n</plugin>\n<plugin>\n    <groupId>org.apache.maven.plugins</groupId>\n    <artifactId>maven-jar-plugin</artifactId>\n    <configuration>\n        <archive>\n            <manifest>\n                <addClasspath>true</addClasspath>\n                <classpathPrefix>lib/</classpathPrefix>\n                <mainClass>theMainClass</mainClass>\n            </manifest>\n        </archive>\n    </configuration>\n</plugin>\n")),(0,r.kt)("p",null,"Alternatively use ",(0,r.kt)("inlineCode",{parentName:"p"},"${project.build.directory}/classes/lib")," as OutputDirectory to integrate all jar-files into the main jar, but then you will need to add custom classloading code to load the jars."),(0,r.kt)("h2",{id:"\u65b9\u6848-3"},"\u65b9\u6848 3"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://robert-reiz.com/2011/10/19/uber-jar-with-maven/"},"Uber JAR with Maven")),(0,r.kt)("p",null,"By default maven is generating a small JAR file, which just contains your compiled classes and other project files. If you want to have a single JAR file which also includes all dependent JAR files, you have to create a uber JAR. You can do that with the maven shade plugin. Just put this lines of xml into your pom.xml."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<build>\n    <plugins>\n        <plugin>\n            <groupId>org.apache.maven.plugins</groupId>\n            <artifactId>maven-shade-plugin</artifactId>\n            <version>1.4</version>\n            <executions>\n                <execution>\n                    <phase>package</phase>\n                    <goals>\n                        <goal>shade</goal>\n                    </goals>\n                    <configuration>\n                        <shadedArtifactAttached>true</shadedArtifactAttached>\n                        <shadedClassifierName>all</shadedClassifierName>\n                    </configuration>\n                </execution>\n            </executions>\n        </plugin>\n    </plugins>\n</build>\n")),(0,r.kt)("p",null,"In Maven you can solve every problem. You just need enough XML code for that. If you still have problems, than probably your pom.xml is to short."))}p.isMDXComponent=!0}}]);